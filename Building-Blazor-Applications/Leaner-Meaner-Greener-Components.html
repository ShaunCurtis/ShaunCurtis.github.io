<!DOCTYPE html>
<html lang="en">
<head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Your description">
<meta name="author" content="Your name">

<!-- OG Meta Tags to improve the way the post looks when you share the page on Facebook, Twitter, LinkedIn -->
<meta property="og:site_name" content="" /> <!-- website name -->
<meta property="og:site" content="" /> <!-- website link -->
<meta property="og:title" content="" /> <!-- title shown in the actual shared post -->
<meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
<meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
<meta property="og:url" content="" /> <!-- where do you want your post to link to -->
<meta name="twitter:card" content="summary_large_image"> <!-- to have large image post format in Twitter -->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta name="description" content="Building Leaner, Meaner, Greener Blazor Components - AKA Rethinking the Blazor Component" >
<meta name="author" content="Shaun Curtis" >



<title>Leaner, Meaner, Greener Components</title>


<!-- Custom fonts for this template-->
<link href="/assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet">

<!-- Custom styles for this template-->
<link href="/assets/css/sb-admin-2.css" rel="stylesheet" type="text/css">
<link href="/assets/css/site.css" rel="stylesheet" type="text/css">

<!-- Favicon  -->
<link rel="icon" href="/assets/images/favicon.png">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
    <link rel="stylesheet" href="/assets/css/article.css" type="text/css">
</head>
<body id="page-top">
    <!--topbar-->
    <div id="topbar">
        
<!-- Topbar -->
<nav class="navbar navbar-expand navbar-light topbar mb-4 static-top">
    
<ul class="navbar-nav" >
<li class="nav-item" >
<a class="nav-link " href="/index.html" role="button"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Index</span>
</a>
</li>
<li class="nav-item dropdown no-arrow mx-1" >
<a class="nav-link dropdown-toggle" href="#" id="546982c5-ac9b-4fa7-88e3-39465fcaee9f" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Articles</span>
</a>
<div class=" dropdown-list dropdown-menu shadow animated--grow-in" aria-labelledby="546982c5-ac9b-4fa7-88e3-39465fcaee9f" >
<a class="dropdown-item" href="/articles/A-Flexible-App.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Creating a Dynamic Blazor App Component
</a>
<a class="dropdown-item" href="/articles/Async-Programming-in-DotNetCore.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Async Programming In Dotnetcore
</a>
<a class="dropdown-item" href="/articles/Blazor-AllinOne.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor All In One - Multi SPA Hosting
</a>
<a class="dropdown-item" href="/articles/Blazor-Async-Programming.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Async Programming
</a>
<a class="dropdown-item" href="/articles/Blazor-Brick-By-Brick.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Brick By Brick
</a>
<a class="dropdown-item" href="/articles/Blazor-Components.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Components
</a>
<a class="dropdown-item" href="/articles/Blazor-CSS.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor CSS
</a>
<a class="dropdown-item" href="/articles/Blazor-DataList-Control.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Datalist Control
</a>
<a class="dropdown-item" href="/articles/Blazor-Form-Validation.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Form Validation
</a>
<a class="dropdown-item" href="/articles/Building-Blazor-List-Components.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building Blazor List Components and the Notification Pattern
</a>
<a class="dropdown-item" href="/articles/Building-Edit-Forms.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building Edit Forms
</a>
<a class="dropdown-item" href="/articles/EditFormState.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
The Blazor EditFormState Control
</a>
<a class="dropdown-item" href="/articles/Hydra.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Hydra
</a>
<a class="dropdown-item" href="/articles/Inline-Dialog.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
The Blazor Inline Dialog Control
</a>
<a class="dropdown-item" href="/articles/Modal-Dialog.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
A Blazor Modal Dialog
</a>
<a class="dropdown-item" href="/articles/Policy-Based-Authorization.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Policy Base Authorization in Blazor
</a>
<a class="dropdown-item" href="/articles/ValidationFormState.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
A Blazor Validation Control
</a>
<a class="dropdown-item" href="/articles/XML-XSD-Serialization.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
XML XSD Serialization
</a>
</div>
</li>
<li class="nav-item dropdown no-arrow mx-1" >
<a class="nav-link dropdown-toggle" href="#" id="59c85d3a-75e7-4dc0-b69e-13a352d64822" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Blazor Database Apps</span>
</a>
<div class=" dropdown-list dropdown-menu shadow animated--grow-in" aria-labelledby="59c85d3a-75e7-4dc0-b69e-13a352d64822" >
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 1
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-2.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 2
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-3.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 3
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-4.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 4
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-5.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 5
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Database Application In Blazor Part 6
</a>
<a class="dropdown-item" href="/Building-a-Database-Application-in-Blazor/index.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building a Database Application in Blazor
</a>
</div>
</li>
<li class="nav-item dropdown no-arrow mx-1" >
<a class="nav-link dropdown-toggle" href="#" id="8858a545-4fe4-4c66-b86f-e76c5b02d0b1" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Building Blazor Applications</span>
</a>
<div class=" dropdown-list dropdown-menu shadow animated--grow-in" aria-labelledby="8858a545-4fe4-4c66-b86f-e76c5b02d0b1" >
<a class="dropdown-item" href="/Building-Blazor-Applications/Blazor-Async-UI-Events.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Async UI Events
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Blazor-Bootstrap-Toaster.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Bootstrap Toaster
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Blazor-Services.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Services
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Building-A-Blazor-AutoComplete-Control.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building A Blazor Autocomplete Control
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Building-Wrapper-Components.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building Wrapper Components
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/DBContexts-In-Transient-Services.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Dbcontexts In Transient Services
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/DynamicCss.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Dynamic Stylesheets
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/For-ForEach-in-Blazor.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
For Foreach In Blazor
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Leaner-Meaner-Greener-Components.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Leaner Meaner Greener Components
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Notification-Service-Pattern.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Blazor Notification Service Pattern
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Rethinking-The-Repository-Pattern.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Rethinking The Repository Pattern
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/The-Blazor-WASM-Hosted-Project.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
The Blazor WASM Hosted Project
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/Whats-Wrong-with-my-Component-Design.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Whats Wrong With My Component Design
</a>
<a class="dropdown-item" href="/Building-Blazor-Applications/The-Blazor-Component" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Building Blazor Applications\The Blazor Component
</a>
</div>
</li>
<li class="nav-item dropdown no-arrow mx-1" >
<a class="nav-link dropdown-toggle" href="#" id="1179398e-1175-45bb-b74b-2a3eb6df7705" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Design</span>
</a>
<div class=" dropdown-list dropdown-menu shadow animated--grow-in" aria-labelledby="1179398e-1175-45bb-b74b-2a3eb6df7705" >
<a class="dropdown-item" href="/Design/Clean-Design-In-Blazor.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Clean Design Principles in Blazor Applications
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
A Blazor Clean Design Template
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template-Solution-Structure.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Solution Structure in the Clean Design Blazor Template
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template-DataServices.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Data Services in the Clean Design Blazor Template
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template-UI.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
The UI in the Clean Design Blazor Template
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template-Solution-Setup.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Solution Setup in the Clean Design Blazor Template
</a>
<a class="dropdown-item" href="/Design/Clean-Design-Blazor-Template-Testing.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Testing in the Clean Design Blazor Template
</a>
</div>
</li>
<li class="nav-item dropdown no-arrow mx-1" >
<a class="nav-link dropdown-toggle" href="#" id="32ffde49-a675-4cf4-bf0b-5fbb5ef10526" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  >
<span class="mr-2 d-none d-lg-inline text-gray-100">Modern C#</span>
</a>
<div class=" dropdown-list dropdown-menu shadow animated--grow-in" aria-labelledby="32ffde49-a675-4cf4-bf0b-5fbb5ef10526" >
<a class="dropdown-item" href="/Modern-Coding-Patterns/Nullable-And-VS-2022.html" >
<i class="fas fa-file-alt fa-sm fa-fw mr-2 text-gray-600"></i>
Nullable And VS 2022
</a>
</div>
</li>
</ul>

    <div class="ms-5 me-5 ml-auto">
        <h1>Cold Elm Coders</h1>
    </div>
</nav>


    </div>
    <!--End topbar-->
    <!--Sidebar-->
    <div id="sidebar">
        
<div class="article-info p-2" Published: 04-11-2022 >
<div>Published: 04-11-2022</div>
<div>Last Updated: 04-11-2022</div>
<div>Author: Shaun Curtis</div>
</div>

        
<h4 class="p-2">Table of Contents</h4>
<ul class="TOC" >
<li class="TOC-item TOC-item-0" >
<a class="TOC-link" href="#">Top</a>
<ul class="TOC TOC-0" >
<li class="TOC-item TOC-item-1" >
<a class="TOC-link" href="#building-leaner-meaner-greener-blazor-components---aka-rethinking-the-blazor-component">Building Leaner, Meaner, Greener Blazor Components - AKA Rethinking the Blazor Component</a>
<ul class="TOC TOC-1" >
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#why">Why?</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#so-why-does-everyone-use-componentbase">So why does everyone use ComponentBase?</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#lean-mean-green-strategies">Lean, Mean, Green Strategies</a>
<ul class="TOC TOC-2" >
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#simplify-the-lifecycle-process">Simplify the Lifecycle Process</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#manage-parameter-changes">Manage Parameter Changes</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#dont-render-when-you-dont-need-to">Don't Render when you don't need to</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#do-you-need-afterrender">Do You need AfterRender?</a>
</li>
</ul>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#our-lean-mean-green-components">Our Lean. Mean. Green Components</a>
<ul class="TOC TOC-2" >
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#uibase">UIBase</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#uicomponentbase">UIComponentBase</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#adding-automated-ui-rendering">Adding Automated UI Rendering</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#adding-onafterrender">Adding OnAfterRender</a>
</li>
</ul>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#render-cascades">Render Cascades</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#some-demonstration-implementations">Some Demonstration Implementations</a>
<ul class="TOC TOC-2" >
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#the-counter-page">The Counter Page</a>
</li>
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#a-weather-record-viewer">A Weather Record Viewer</a>
</li>
</ul>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#conclusions">Conclusions</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#appendix">Appendix</a>
<ul class="TOC TOC-2" >
<li class="TOC-item TOC-item-3" >
<a class="TOC-link" href="#componentbase">ComponentBase</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
    <!--End Sidebar-->
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">
                <!-- Topbar -->
                <div id="article">
                    <!-- Article -->
                    
<!-- Header -->
<header class="ex-header-article">
    <div class="container">
        <div class="row pt-3 pb-3 border-bottom">
            <div class="col">
                
<h1>Leaner, Meaner, Greener Components</h1>
<div>Building Leaner, Meaner, Greener Blazor Components - AKA Rethinking the Blazor Component</div>

            </div> <!-- end of col -->
        </div> <!-- end of row -->
    </div> <!-- end of container -->
</header> <!-- end of ex-header -->
<!-- end of header -->


                    
<!-- Article Container -->
<div class="ex-basic-1 pt-4">
    <div class="container">
        <div class="row">
            <div class="col-12">
                

        <h1 id="building-leaner-meaner-greener-blazor-components---aka-rethinking-the-blazor-component">Building Leaner, Meaner, Greener Blazor Components - AKA Rethinking the Blazor Component</h1>
<p>Blazor ships with a single developer &quot;Component&quot;.  If you add a Razor file it inherits from it by default.</p>
<p><code>ComponentBase</code> rules the Blazor UI world.  You don't have to use it, but probably 99.x% of all developer built components either inherit directly or indirectly from it.</p>
<p>In a world of diversity, we have a one size fits all, swiss army knife solution.  A jack of all trades and master of none.</p>
<p>Most articles treat <code>ComponentBase</code> and &quot;Blazor Component&quot; as synonymous.</p>
<p><code>ComponentBase</code> should be just one tool in your toolbox, not the toolbox.  I may be in a minority of one. but I rarely use it.</p>
<h2 id="why">Why?</h2>
<p>Valid question.  My application runs perfectly well with <code>ComponentBase</code>.  Most of mine do to, but that's no reason to use it.</p>
<p>Consider this:</p>
<ul>
<li>Most code in the component's memory footprint is never run.  It's just bloatware: memory occupied doing nothing.</li>
<li>Most render events the component generates result in no UI changes.  CPU cycles used achieving nothing.</li>
<li>There are some key inheritance issues that it doesn't address.</li>
</ul>
<p>To summarise why not: it occupies memory space that it isn't using and consumes CPU cycles for no purpose.  That's money and energy going down the drain.</p>
<p>Do you really write lean, mean, green code?</p>
<p>Let me illustrate my point.</p>
<p>Here's a &quot;simple&quot; component.  It's a Bootstrap container.</p>
<pre><code class="language-csharp"><div>&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;
    @ChildContent
&lt;/div&gt;
@code {
    [<span class="hljs-meta">Parameter</span>] <span class="hljs-keyword">public</span> RenderFragment? ChildContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</div></code></pre>
<p>Looks very simple and would probably pass code review.</p>
<p>Now take a look at this?  I haven't shown you the 150+ lines - I don't want TLDR!</p>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ComponentBase</span> : <span class="hljs-title">IComponent</span>, <span class="hljs-title">IHandleEvent</span>, <span class="hljs-title">IHandleAfterRender</span>
{
    <span class="hljs-comment">// 150+ lines</span>
    <span class="hljs-comment">// See Appendix for the 150+ lines</span>
}
</div></code></pre>
<p>This is what the above component really looks like.  Do you think this would pass code review?</p>
<h2 id="so-why-does-everyone-use-componentbase">So why does everyone use ComponentBase?</h2>
<p>Never thought about it, asked the right questions, lazy, don't know any better.  Component library suppliers - no idea, there are plenty of clever people around in those organisations.  They may display green credentials, but every time one of their components gets rendered it burning more energy that it should.</p>
<p>If every component you've written derives from <code>ComponentBase</code>, you need to seriously consider why.</p>
<p>To quote from the source code for <code>ComponentBase</code>:</p>
<blockquote>
<p>Most of the developer-facing component lifecycle concepts are encapsulated in this base class. The core components rendering system doesn't know about them (it only knows about IComponent). This gives us flexibility to change the lifecycle concepts easily, or for developers to design their own lifecycles as different base classes.</p>
</blockquote>
<p>I don't think the author of that comment ever expected <code>ComponentBase</code> to dominate the Blazor UI.  Look across the component landscape and see if you can spot any different base classes.</p>
<p>Here are the base classes for two of the popular Blazor libraries available on the market:</p>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RadzenComponent</span> : <span class="hljs-title">ComponentBase</span>, <span class="hljs-title">IDisposable</span>
</div></code></pre>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MudComponentBase</span> : <span class="hljs-title">ComponentBase</span>
</div></code></pre>
<p>Good developers who understand <code>ComponentBase</code> are questioning component usage. They believe simple components are too <strong>expensive</strong>.  They have too much overhead and carry too much baggage.  They write repetitive code to avoid building too many components into a page.</p>
<p>My answer: Don't throw away the component: write base components that are fit for purpose.</p>
<p>I have two principle base components.  They are based on what I call the <strong>Lean Mean Green Component</strong> - LMGC from now on - that I'll cover in detail below.</p>
<h2 id="lean-mean-green-strategies">Lean, Mean, Green Strategies</h2>
<h3 id="simplify-the-lifecycle-process">Simplify the Lifecycle Process</h3>
<p>How many of your components use the full gamat of lifecycle methods?  1%, if that.  Simplify and remove a lot of code and expensive Task construction for no purpose.</p>
<h3 id="manage-parameter-changes">Manage Parameter Changes</h3>
<p>When a component is rendered, the renderer must decide whether any child components need re-rendering.  It manages a component's parameter state though a <code>ParametersView</code> object.  It checks if any child component parameters have changed, and if so, calls <code>SetParametersAsync</code> passing in the <code>ParametersView</code> object.</p>
<p>The first line of <code>SetParametersAsync</code> uses the <code>ParametersView</code> to set the component's parameters.</p>
<pre><code class="language-csharp"><div>        parameters.SetParameterProperties(<span class="hljs-keyword">this</span>);
</div></code></pre>
<p>There are two issues with this process.  Neither are simple to address:</p>
<ol>
<li>
<p>Setting the parameters is expensive exercise because <code>ParameterView</code> uses reflection to find and assign the parameter values.</p>
</li>
<li>
<p>The method by which <code>ParameterView</code> detects state change is optimized, but relatively crude.</p>
</li>
</ol>
<p>Here's the code:</p>
<pre><code class="language-csharp"><div><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">MayHaveChanged</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>&gt;(<span class="hljs-params">T1 oldValue, T2 newValue</span>)</span>
{
    <span class="hljs-keyword">var</span> oldIsNotNull = oldValue != <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> newIsNotNull = newValue != <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// Only one is null so different</span>
    <span class="hljs-keyword">if</span> (oldIsNotNull != newIsNotNull)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">var</span> oldValueType = oldValue!.GetType();
    <span class="hljs-keyword">var</span> newValueType = newValue!.GetType();

    <span class="hljs-keyword">if</span> (oldValueType != newValueType)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (!IsKnownImmutableType(oldValueType))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">return</span> !oldValue.Equals(newValue);
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsKnownImmutableType</span>(<span class="hljs-params">Type type</span>)</span>
    =&gt; type.IsPrimitive
        || type == <span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">string</span>)
        || type == <span class="hljs-keyword">typeof</span>(DateTime)
        || type == <span class="hljs-keyword">typeof</span>(Type)
        || type == <span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">decimal</span>)
        || type == <span class="hljs-keyword">typeof</span>(Guid);
</div></code></pre>
<p>Callbacks and RenderFragments are objects and always fail the <code>IsKnownImmutableType</code> test.</p>
<p>My strategies are:</p>
<ol>
<li>Stick to Immutable types where possible.</li>
<li>Live with it.</li>
<li>If a component is being used a lot and performance is an issue, do the assignment and change checking manually.  You can often code Callbacks and RenderFragments that won't change once initially assigned.</li>
<li>Stop unnecessary top down component tree render cascades. See the next strategy.</li>
</ol>
<h3 id="dont-render-when-you-dont-need-to">Don't Render when you don't need to</h3>
<p>Yes, a double negative - you should only render a component when you need to.  Don't do it by default, which is what <code>ComponentBase</code> does.</p>
<p>Here's the <code>ComponentBase</code> handler for UI events:</p>
<pre><code class="language-csharp"><div>Task IHandleEvent.HandleEventAsync(EventCallbackWorkItem callback, <span class="hljs-built_in">object</span>? arg)
{
    <span class="hljs-keyword">var</span> task = callback.InvokeAsync(arg);
    <span class="hljs-keyword">var</span> shouldAwaitTask = task.Status != TaskStatus.RanToCompletion &amp;&amp;
        task.Status != TaskStatus.Canceled;

    StateHasChanged();

    <span class="hljs-keyword">return</span> shouldAwaitTask ?
        CallStateHasChangedOnAsyncCompletion(task) :
        Task.CompletedTask;
}
</div></code></pre>
<p>If you don't implement <code>IHandleEvent</code> then you are repsonsible for calling <code>StateHasChanged</code> when you need to.</p>
<h3 id="do-you-need-afterrender">Do You need AfterRender?</h3>
<p><code>ComponentBase</code> implements a set of after render events.</p>
<pre><code class="language-csharp"><div>    Task IHandleAfterRender.OnAfterRenderAsync()
    {
        <span class="hljs-keyword">var</span> firstRender = !_hasCalledOnAfterRender;
        _hasCalledOnAfterRender |= <span class="hljs-literal">true</span>;

        OnAfterRender(firstRender);

        <span class="hljs-keyword">return</span> OnAfterRenderAsync(firstRender);
    }
</div></code></pre>
<p>Probably 99% of components don't need them.  So manually implement <code>IHandleAfterRender</code> on the rare occasions you need it.</p>
<h2 id="our-lean-mean-green-components">Our Lean. Mean. Green Components</h2>
<p>Based on what we've discussed above we can build a set of new base components.</p>
<h3 id="uibase">UIBase</h3>
<p>This is the minimum functionality core component.</p>
<p>What's in it:</p>
<ol>
<li>It inherits from <code>IComponent</code>.</li>
<li>All the internal class fields are <code>protected</code> so can be accessed and set in child components.</li>
<li>It has no UI event handler to drive an automatic render request.  Call <code>StateHasChanged</code> when you want to make a render request.</li>
<li>There's no AfterRender infrastructure.  Implement it if you need it.</li>
<li>There are two <code>StateHasChanged</code> methods.
<ol>
<li><code>StateHasChanged</code> is the same as the familiar <code>StateHasChanged</code>.</li>
<li><code>InvokeStateHasChanged</code> ensures <code>StateHasChanged</code> is called on the UI thread.</li>
</ol>
</li>
<li>There's no lifecycle events.</li>
<li>A <code>BuildRenderTree</code> method for compatibility with Razor components.</li>
<li>It caches <code>renderFragment</code> for efficiency.</li>
<li>A <code>Hidden</code> Parameter to mimic the hidden html attribute that can be set externally.</li>
<li>A class <code>hide</code> field that can be set internally in child classes.</li>
<li>A <code>ChildContent</code> Parameter for component content.</li>
</ol>
<p><code>Hidden</code>/<code>hide</code> is built is at this level so it can be implemented efficiently in the component <code>renderFragment</code>.</p>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIBase</span> : <span class="hljs-title">IComponent</span>
{
    <span class="hljs-keyword">protected</span> RenderFragment renderFragment;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> RenderHandle renderHandle;
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">bool</span> hasPendingQueuedRender = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> <span class="hljs-built_in">bool</span> hasNeverRendered = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">bool</span> hide;

    [<span class="hljs-meta">Parameter</span>] <span class="hljs-keyword">public</span> RenderFragment? ChildContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    [<span class="hljs-meta">Parameter</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> Hidden { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">false</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UIBase</span>(<span class="hljs-params"></span>)</span>
    {
        renderFragment = builder =&gt;
        {
            hasPendingQueuedRender = <span class="hljs-literal">false</span>;
            hasNeverRendered = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (!(Hidden | hide))
                BuildRenderTree(builder);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildRenderTree</span>(<span class="hljs-params">RenderTreeBuilder builder</span>)</span> { }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StateHasChanged</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span> (hasPendingQueuedRender)
            <span class="hljs-keyword">return</span>;

        hasPendingQueuedRender = <span class="hljs-literal">true</span>;
        renderHandle.Render(renderFragment);
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InvokeStateHasChanged</span>(<span class="hljs-params"></span>)</span>
        =&gt; renderHandle.Dispatcher.InvokeAsync(StateHasChanged);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Attach</span>(<span class="hljs-params">RenderHandle renderHandle</span>)</span>
        =&gt; <span class="hljs-keyword">this</span>.renderHandle = renderHandle;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> Task <span class="hljs-title">SetParametersAsync</span>(<span class="hljs-params">ParameterView parameters</span>)</span>
    {
        parameters.SetParameterProperties(<span class="hljs-keyword">this</span>);
        StateHasChanged();
        <span class="hljs-keyword">return</span> Task.CompletedTask;
    }
}
</div></code></pre>
<h3 id="uicomponentbase">UIComponentBase</h3>
<p><code>UIComponentBase</code> adds a single lifefcycle event <code>OnParametersChangedAsync</code>.  It:</p>
<ol>
<li>Passes in a <code>bool</code> to indicate first render.</li>
<li>Expects a return <code>bool</code> used to control component render.  It will always render once.</li>
<li>Is a <code>ValueTask</code> to save overhead.</li>
</ol>
<p><code>OnParametersChangedAsync</code> can be used to:</p>
<ol>
<li>Do everything you did in <code>OnInitialized{Async}</code> and <code>OnParametersSet{Async}</code>.</li>
<li>Check what parameters have been set and decide if a render is necessary.</li>
</ol>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">UIComponentBase</span> : <span class="hljs-title">UIBase</span>
{
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">bool</span> initialized;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> ValueTask&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">OnParametersChangedAsync</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> firstRender</span>)</span>
        =&gt; ValueTask.FromResult(<span class="hljs-literal">true</span>);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SetParametersAsync</span>(<span class="hljs-params">ParameterView parameters</span>)</span>
    {
        parameters.SetParameterProperties(<span class="hljs-keyword">this</span>);

        <span class="hljs-keyword">var</span> dorender = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.OnParametersChangedAsync(!initialized)
            || hasNeverRendered
            || !hasPendingQueuedRender;

        <span class="hljs-keyword">if</span> (dorender)
            <span class="hljs-keyword">this</span>.StateHasChanged();

        <span class="hljs-keyword">this</span>.initialized = <span class="hljs-literal">true</span>;
    }
}
</div></code></pre>
<h3 id="adding-automated-ui-rendering">Adding Automated UI Rendering</h3>
<p>If you need automated UI rendering, implement <code>IHandleEvent</code>.</p>
<p>For a single render:</p>
<pre><code class="language-csharp"><div>@implements IHandleEvent

<span class="hljs-comment">//...</span>
@code {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleEventAsync</span>(<span class="hljs-params">EventCallbackWorkItem callback, <span class="hljs-built_in">object</span>? arg</span>)</span>
    {
        <span class="hljs-keyword">await</span> callback.InvokeAsync(arg);
        StateHasChanged();
    }
}
</div></code></pre>
<p>For a double event:</p>
<pre><code class="language-csharp"><div>@implements IHandleEvent

<span class="hljs-comment">//...</span>
@code {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleEventAsync</span>(<span class="hljs-params">EventCallbackWorkItem callback, <span class="hljs-built_in">object</span>? arg</span>)</span>
    {
        <span class="hljs-keyword">var</span> task = callback.InvokeAsync(arg);
        <span class="hljs-keyword">if</span> (task.Status != TaskStatus.RanToCompletion &amp;&amp; task.Status != TaskStatus.Canceled)
        {
            StateHasChanged();
            <span class="hljs-keyword">await</span> task;
        }
        StateHasChanged();
    }
}
</div></code></pre>
<h3 id="adding-onafterrender">Adding OnAfterRender</h3>
<p>If you need to implement the <code>OnAfterRender</code> event, implement <code>IHandleAfterRender</code>.</p>
<pre><code class="language-csharp"><div>@implements IHandleAfterRender

<span class="hljs-comment">//...</span>

@code {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _hasCalledOnAfterRender;

    <span class="hljs-function"><span class="hljs-keyword">public</span> Task <span class="hljs-title">OnAfterRenderAsync</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">var</span> firstRender = !_hasCalledOnAfterRender;
        _hasCalledOnAfterRender |= <span class="hljs-literal">true</span>;

        <span class="hljs-comment">// your code here</span>

        <span class="hljs-keyword">return</span> Task.CompletedTask;
    }
}
</div></code></pre>
<h2 id="render-cascades">Render Cascades</h2>
<p>One of the most important strategies to implement is avoiding render cascades.</p>
<p>If you render a component with sub-components that have object parameters, the Renderer will call <code>SetParametersAsync</code> on the sub-components regardless of an real state change.  Unless you've implemented stop strategies in those components rendering will cascade down through the tree.</p>
<p>The principle way to minimize this is:</p>
<ol>
<li>Use state objects with events to drive updates.</li>
<li>Call <code>StateHasChanged</code> in the correct point in the render tree.</li>
<li>Use base components at the top of the tree that don't automatically trigger render events.</li>
</ol>
<h2 id="some-demonstration-implementations">Some Demonstration Implementations</h2>
<h3 id="the-counter-page">The Counter Page</h3>
<p>This demonstration shows how to rebuild the Counter page.</p>
<h4 id="counterstate">CounterState</h4>
<p>We need a state object to track the counter state.</p>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CounterState</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Counter { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }

    <span class="hljs-keyword">public</span> Action&lt;<span class="hljs-built_in">int</span>&gt;? CounterUpdated;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">IncrementCounter</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">this</span>.Counter++;
        <span class="hljs-keyword">this</span>.CounterUpdated?.Invoke(<span class="hljs-keyword">this</span>.Counter);
    }
}
</div></code></pre>
<h4 id="countercomponentrazor">CounterComponent.razor</h4>
<p><code>CounterComponent</code> displays the Counter.  It inherits from <code>UIComponentBase</code> and implements <code>IDisposable</code>.</p>
<p>It's a little more intricate than a standard component but is pretty self explanatory.</p>
<pre><code class="language-csharp"><div>@namespace Blazr.Components
@implements IDisposable
@inherits UIComponentBase

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;alert alert-info&quot;</span>&gt;
    @this.Counter
&lt;/div&gt;

@code {
    [<span class="hljs-meta">CascadingParameter</span>] <span class="hljs-keyword">private</span> CounterState State { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> Counter;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> ValueTask&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">OnParametersChangedAsync</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> firstRender</span>)</span>
    {
        <span class="hljs-keyword">if</span> (firstRender)
        {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.State <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullReferenceException(<span class="hljs-string">$&quot;State cannot be null in Component <span class="hljs-subst">{<span class="hljs-keyword">this</span>.GetType().Name}</span>&quot;</span>);

            <span class="hljs-keyword">this</span>.State.CounterUpdated += <span class="hljs-keyword">this</span>.OnCounterUpdated;
        }
        <span class="hljs-keyword">return</span> ValueTask.FromResult(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCounterUpdated</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> counter</span>)</span>
    {
        <span class="hljs-keyword">this</span>.Counter = counter;
        <span class="hljs-keyword">this</span>.StateHasChanged();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Dispose</span>(<span class="hljs-params"></span>)</span>
        =&gt; <span class="hljs-keyword">this</span>.State.CounterUpdated -= <span class="hljs-keyword">this</span>.OnCounterUpdated;
}
</div></code></pre>
<h4 id="counterrazor">Counter.Razor</h4>
<p><code>Counter</code> implements <code>UIBase</code>: it doesn't need the lifecycle event.  it creates an instance of <code>CounterState</code>, cascades it and updates it on the button click.  There are three instances of <code>CounterComponent</code> to demonstrate the multi-cast functionality of the event.</p>
<p>I've left the old counter code in place so you can see that it no longer updates.  <code>IncrementCounter</code> no longer triggers a render of the route component, and therfore no longer triggers a render cascade.</p>
<pre><code class="language-csharp"><div>@page <span class="hljs-string">&quot;/counter&quot;</span>
@inherits UIBase
&lt;PageTitle&gt;Counter&lt;/PageTitle&gt;

&lt;h1&gt;Counter&lt;/h1&gt;

&lt;p role=<span class="hljs-string">&quot;status&quot;</span>&gt;Current count: @currentCount&lt;/p&gt;
&lt;CascadingValue Value=<span class="hljs-string">&quot;this.counterState&quot;</span>&gt;
    &lt;CounterComponent /&gt;
    &lt;CounterComponent /&gt;
    &lt;CounterComponent /&gt;
&lt;/CascadingValue&gt;

&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> @onclick=<span class="hljs-string">&quot;IncrementCount&quot;</span>&gt;Click me&lt;/button&gt;

@code {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> currentCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> CounterState counterState = <span class="hljs-keyword">new</span> CounterState();

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">IncrementCount</span>(<span class="hljs-params"></span>)</span>
    {
        currentCount++;
        <span class="hljs-keyword">this</span>.counterState.IncrementCounter();
    }
}
</div></code></pre>
<h3 id="a-weather-record-viewer">A Weather Record Viewer</h3>
<p>This demonstrates selective rendering in <code>SetParametersAsync</code>.  The forward and back buttons move up and down the record set and reload the route.  The component tracks the current record with <code>_id</code> and in <code>OnParametersChangedAsync</code> checks the updated parameter <code>Id</code>.  It only renders (returns true) when Id has changed.</p>
<pre><code class="language-csharp"><div>@page <span class="hljs-string">&quot;/WeatherView/{Id:int}&quot;</span>
@inherits UIComponentBase
@inject NavigationManager NavManager

&lt;h3&gt;WeatherViewer&lt;/h3&gt;

&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;row mb-2&quot;</span>&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-3&quot;</span>&gt;
        Date
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-3&quot;</span>&gt;
        @this.<span class="hljs-keyword">record</span>.Date
    &lt;/div&gt;
&lt;/div&gt;
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;row mb-2&quot;</span>&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-3&quot;</span>&gt;
        Temperature &amp;deg;C
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-3&quot;</span>&gt;
        @this.<span class="hljs-keyword">record</span>.TemperatureC
    &lt;/div&gt;
&lt;/div&gt;
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;row mb-2&quot;</span>&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-3&quot;</span>&gt;
        Summary
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;col-6&quot;</span>&gt;
        @this.<span class="hljs-keyword">record</span>.Summary
    &lt;/div&gt;
&lt;/div&gt;
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;m-2&quot;</span>&gt;
    &lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;btn btn-dark&quot;</span> @onclick=<span class="hljs-string">&quot;() =&gt; this.Move(-1)&quot;</span>&gt;Previous&lt;/button&gt; 
    &lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span> @onclick=<span class="hljs-string">&quot;() =&gt; this.Move(1)&quot;</span>&gt;Next&lt;/button&gt;
&lt;/div&gt;

@code {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _id;
    <span class="hljs-keyword">private</span> WeatherForecast <span class="hljs-keyword">record</span> = <span class="hljs-keyword">new</span>();

    [<span class="hljs-meta">Parameter</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">0</span>;

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> ValueTask&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">OnParametersChangedAsync</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> firstRender</span>)</span>
    {
        <span class="hljs-keyword">var</span> recordChanged = !<span class="hljs-keyword">this</span>.Id.Equals(_id);

        <span class="hljs-keyword">if</span> (recordChanged)
        {
            _id = <span class="hljs-keyword">this</span>.Id;
            <span class="hljs-keyword">this</span>.<span class="hljs-keyword">record</span> = <span class="hljs-keyword">await</span> GetForecast(<span class="hljs-keyword">this</span>.Id);
        }

        <span class="hljs-keyword">return</span> recordChanged;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> ValueTask&lt;WeatherForecast&gt; <span class="hljs-title">GetForecast</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span>
    {
        <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">100</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> WeatherForecast
            {
                Date = DateOnly.FromDateTime(DateTime.Now.AddDays(id)),
                TemperatureC = id,
                Summary = <span class="hljs-string">&quot;Testing&quot;</span>
            };
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Move</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span>
        =&gt; <span class="hljs-keyword">this</span>.NavManager.NavigateTo(<span class="hljs-string">$&quot;/WeatherView/<span class="hljs-subst">{_id + <span class="hljs-keyword">value</span>}</span>&quot;</span>);
}
</div></code></pre>
<h2 id="conclusions">Conclusions</h2>
<p>If this article isn't a wake up call to serious Blazor developers to rethink the component, I've failed!</p>
<p>What will it take to get out of the <code>ComponentBase</code> comfort zone.  Your building the whole UI on a jack-of-all-trades master-of-none base class.  It has just about everything thrown in to cover almost every eventuality.</p>
<p>It's great to get you started.  Learn the ropes, look under the hood. Buth then move on.</p>
<h2 id="appendix">Appendix</h2>
<h3 id="componentbase">ComponentBase</h3>
<p>This is the code that gets loaded with every component you build that inherits from <code>ComponentBase</code>.</p>
<pre><code class="language-csharp"><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ComponentBase</span> : <span class="hljs-title">IComponent</span>, <span class="hljs-title">IHandleEvent</span>, <span class="hljs-title">IHandleAfterRender</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> RenderFragment _renderFragment;
    <span class="hljs-keyword">private</span> RenderHandle _renderHandle;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _initialized;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _hasNeverRendered = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _hasPendingQueuedRender;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _hasCalledOnAfterRender;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ComponentBase</span>(<span class="hljs-params"></span>)</span>
    {
        _renderFragment = builder =&gt;
        {
            _hasPendingQueuedRender = <span class="hljs-literal">false</span>;
            _hasNeverRendered = <span class="hljs-literal">false</span>;
            BuildRenderTree(builder);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildRenderTree</span>(<span class="hljs-params">RenderTreeBuilder builder</span>)</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnInitialized</span>(<span class="hljs-params"></span>)</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> Task <span class="hljs-title">OnInitializedAsync</span>(<span class="hljs-params"></span>)</span> =&gt; Task.CompletedTask;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnParametersSet</span>(<span class="hljs-params"></span>)</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> Task <span class="hljs-title">OnParametersSetAsync</span>(<span class="hljs-params"></span>)</span> =&gt; Task.CompletedTask;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">ShouldRender</span>(<span class="hljs-params"></span>)</span> =&gt; <span class="hljs-literal">true</span>;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnAfterRender</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> firstRender</span>)</span> { }
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> Task <span class="hljs-title">OnAfterRenderAsync</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> firstRender</span>)</span> =&gt; Task.CompletedTask;
    <span class="hljs-function"><span class="hljs-keyword">protected</span> Task <span class="hljs-title">InvokeAsync</span>(<span class="hljs-params">Action workItem</span>)</span> =&gt; _renderHandle.Dispatcher.InvokeAsync(workItem);
    <span class="hljs-function"><span class="hljs-keyword">protected</span> Task <span class="hljs-title">InvokeAsync</span>(<span class="hljs-params">Func&lt;Task&gt; workItem</span>)</span> =&gt; _renderHandle.Dispatcher.InvokeAsync(workItem);

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StateHasChanged</span>(<span class="hljs-params"></span>)</span>
    {
        <span class="hljs-keyword">if</span> (_hasPendingQueuedRender)
            <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">if</span> (_hasNeverRendered || ShouldRender() || _renderHandle.IsRenderingOnMetadataUpdate)
        {
            _hasPendingQueuedRender = <span class="hljs-literal">true</span>;

            <span class="hljs-keyword">try</span>
            {
                _renderHandle.Render(_renderFragment);
            }
            catch
            {
                _hasPendingQueuedRender = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">throw</span>;
            }
        }
    }

    <span class="hljs-keyword">void</span> IComponent.Attach(RenderHandle renderHandle)
    {
        <span class="hljs-keyword">if</span> (_renderHandle.IsInitialized)
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(<span class="hljs-string">$&quot;The render handle is already set. Cannot initialize a <span class="hljs-subst">{<span class="hljs-keyword">nameof</span>(ComponentBase)}</span> more than once.&quot;</span>);

        _renderHandle = renderHandle;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> Task <span class="hljs-title">SetParametersAsync</span>(<span class="hljs-params">ParameterView parameters</span>)</span>
    {
        parameters.SetParameterProperties(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">if</span> (!_initialized)
        {
            _initialized = <span class="hljs-literal">true</span>;

            <span class="hljs-keyword">return</span> RunInitAndSetParametersAsync();
        }
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> CallOnParametersSetAsync();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RunInitAndSetParametersAsync</span>(<span class="hljs-params"></span>)</span>
    {
        OnInitialized();
        <span class="hljs-keyword">var</span> task = OnInitializedAsync();

        <span class="hljs-keyword">if</span> (task.Status != TaskStatus.RanToCompletion &amp;&amp; task.Status != TaskStatus.Canceled)
        {
            StateHasChanged();

            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">await</span> task;
            }
            catch
            {
                <span class="hljs-keyword">if</span> (!task.IsCanceled)
                    <span class="hljs-keyword">throw</span>;
            }
        }

        <span class="hljs-keyword">await</span> CallOnParametersSetAsync();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> Task <span class="hljs-title">CallOnParametersSetAsync</span>(<span class="hljs-params"></span>)</span>
    {
        OnParametersSet();
        <span class="hljs-keyword">var</span> task = OnParametersSetAsync();

        <span class="hljs-keyword">var</span> shouldAwaitTask = task.Status != TaskStatus.RanToCompletion &amp;&amp;
            task.Status != TaskStatus.Canceled;

        StateHasChanged();

        <span class="hljs-keyword">return</span> shouldAwaitTask ?
            CallStateHasChangedOnAsyncCompletion(task) :
            Task.CompletedTask;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">CallStateHasChangedOnAsyncCompletion</span>(<span class="hljs-params">Task task</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">await</span> task;
        }
        catch 
        {
            <span class="hljs-keyword">if</span> (task.IsCanceled)
                <span class="hljs-keyword">return</span>;

            <span class="hljs-keyword">throw</span>;
        }

        StateHasChanged();
    }

    Task IHandleEvent.HandleEventAsync(EventCallbackWorkItem callback, <span class="hljs-built_in">object</span>? arg)
    {
        <span class="hljs-keyword">var</span> task = callback.InvokeAsync(arg);
        <span class="hljs-keyword">var</span> shouldAwaitTask = task.Status != TaskStatus.RanToCompletion &amp;&amp;
            task.Status != TaskStatus.Canceled;

        StateHasChanged();

        <span class="hljs-keyword">return</span> shouldAwaitTask ?
            CallStateHasChangedOnAsyncCompletion(task) :
            Task.CompletedTask;
    }

    Task IHandleAfterRender.OnAfterRenderAsync()
    {
        <span class="hljs-keyword">var</span> firstRender = !_hasCalledOnAfterRender;
        _hasCalledOnAfterRender |= <span class="hljs-literal">true</span>;

        OnAfterRender(firstRender);

        <span class="hljs-keyword">return</span> OnAfterRenderAsync(firstRender);
    }
}
</div></code></pre>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    

            </div>
        </div>
    </div>
</div>
<!-- end of Article Container -->


                </div>
                <!-- End of Main Content -->
            </div>
            <!-- Footer -->
            
<!-- Copyright -->
<footer class="sticky-footer bg-white">
    <div class="container my-auto">
        <div class="copyright text-center my-auto">
            
<span>Copyright &copy; Cold Elm Coders - 2022</span>

        </div>
    </div>
</footer>
<!-- end of copyright -->


            <!-- End of Footer -->
        </div>
        <!-- End of Content Wrapper -->
        
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>


    </div>
    <!-- End of Page Wrapper -->
    <!-- Scripts -->
    
<!-- Scripts -->
<!-- Bootstrap core JavaScript-->
<script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="/assets/vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="/assets/js/sb-admin-2.min.js"></script>


</body>
</html>
