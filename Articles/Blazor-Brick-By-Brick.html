<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<base href="/">

	

	

	
	<link href="/resources/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

	
	<link href="/resources/css/sb-admin-2.css" rel="stylesheet" type="text/css">
	<link href="/resources/css/site.css" rel="stylesheet" type="text/css">

	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
	<link rel="stylesheet" href="/resources/css/article.css" type="text/css">

	
	<link rel="icon" href="/assets/favicon.png">

	<title>Building a Blazor App from Scratch</title>
        <meta property="author" content="Shaun Curtis" />
        <meta property="description" content="This article describes how to build a Blazor App from the standard AspNetCore Web template." />
    <meta property="og:site_name" content="Cold Elm Coders" />
        <meta property="og:site" content="https://shauncurtis.github.io/" />
        <meta property="og:title" content="Building a Blazor App from Scratch" />
        <meta property="og:description" content="This article describes how to build a Blazor App from the standard AspNetCore Web template." /></head>
<body><header class="navbar bg-dark p-2 text-large text-light"><section class="navbar-section  text-light"><a href="/" class="navbar-brand mr-2 text-large text-light p-2">Cold Elm Coders</a>
			<a href="/Posts" class="btn btn-link text-light">Posts</a>
			<a href="/Rants" class="btn btn-link text-light">Rants</a>
			<a href="/Articles" class="btn btn-link text-light">Articles</a>
			<a href="/Stories" class="btn btn-link text-light">Stories</a>
			<a href="/about.html" class="btn btn-link text-light">About</a></section></header>

	<div class="container-fluid"><div class="row"><div class="col-12 col-sm-3 col-lg-2 bg-light pt-2"><div class="article-info p-2"><div class="mb-2">Published: 04-Jan-2022</div>
                <div class="mb-2">Updated: 04-Jan-2022</div>
                <div class="mb-2">Author: Shaun Curtis</div></div>
    <h4 class="p-2">Table of Contents</h4>
<ul class="TOC" >
<li class="TOC-item TOC-item-0" >
<a class="TOC-link" href="#">Top</a>
<ul class="TOC TOC-0" >
<li class="TOC-item TOC-item-1" >
<ul class="TOC TOC-1" >
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#prerequesites">Prerequesites</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#code-repository">Code Repository</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#building-the-project">Building the Project</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#adding-a-blazor-component-to-a-razor-page">Adding a Blazor Component to a Razor Page</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#configuring-the-server-to-run-the-blazor-services">Configuring the Server to run the Blazor Services</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#building-a-blazor-spa">Building a Blazor SPA</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#building-a-full-blazor-server-app">Building a Full Blazor Server App</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#setting-the-blazor-app-as-default">Setting the Blazor App as Default</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#summary">Summary</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
			
			<div class="col-12 col-sm-9 col-lg-10 p-2"><div class="pt-2 pb-2 border-bottom mb-4 text-primary"><h1>Building a Blazor App from Scratch</h1>
            <div><small>This article describes how to build a Blazor App from the standard AspNetCore Web template.</small></div></div>
    <p>In this article we'll build a Blazor Server Application brick-by-brick from the standard AspNetCore Web Application template.</p>
<p>The purpose of this article is a practical lesson in what Blazor really is and how you can start using it.  It should help you understand Blazor more quickly than simply deploying the template and playing with it.</p>
<p>While I'm a firm advocate of Visual Studio, we use Visual Studio code for this exercise to get a bit closer to the coal face.</p>
<h2 id="prerequesites">Prerequesites</h2>
<ul>
<li>Visual Studio Code</li>
<li>Net6.0 SDK</li>
</ul>
<blockquote>
<p>To keep things simple all the code and components are in a single namespace <strong>Blazr</strong>.</p>
</blockquote>
<h2 id="code-repository">Code Repository</h2>
<p>You can find all the code in the <a href="https://github.com/ShaunCurtis/BlazrServer">BlazrServer</a> Github Repository.</p>
<h2 id="building-the-project">Building the Project</h2>
<ol>
<li><p>Create a <em>Repos</em> folder in <em>Documents</em> (if you don't already have one).</p>
</li>
<li><p>Create a <em>Repos/BlazorServer</em> folder.</p>
</li>
<li><p>Open Visual Studio Code on the folder.</p>
</li>
<li><p><code>Ctl + '</code> to open the terminal.</p>
</li>
</ol>
<p>We're ready to deploy a template to the current folder.  But which one?</p>
<pre><code>PS C:\Users\shaun\source\repos\BlazrServer &gt; dotnet new --list
</code></pre>
<p>Will list all the installed templates.</p>
<p>We're after:</p>
<pre><code>ASP.NET Core Web App                          webapp,razor         [C#]        Web/MVC/Razor Pages
</code></pre>
<p>To use this:</p>
<pre><code>PS &gt; dotnet new razor
</code></pre>
<p>And we get:</p>
<pre><code>The template &quot;ASP.NET Core Web App&quot; was created successfully.
This template contains technologies from parties other than Microsoft, see https://aka.ms/aspnetcore/6.0-third-party-notices for details.

Processing post-creation actions...
Running 'dotnet restore' on C:\Users\shaun\source\repos\BlazorServer\BlazorServer.csproj...
  Determining projects to restore...
  Restored C:\Users\shaun\source\repos\BlazorServer\BlazorServer.csproj (in 90 ms).
Restore succeeded.
</code></pre>
<p>A set of folders and files deployed into the directory.</p>
<p>At this point we can:</p>
<pre><code>PS &gt; dotnet watch run debug
</code></pre>
<p>to get this:</p>
<pre><code>PS C:\Users\shaun\source\repos\BlazorServer&gt; dotnet watch run debug
watch : Started
Building...
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: https://localhost:7280
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5280
info: Microsoft.Hostingetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: C:\Users\shaun\source\repos\BlazorServer\
</code></pre>
<p>And our site.</p>
<p><img src="https://shauncurtis.github.io/articles/assets/Blazor-App/Base-Template-Run.png" alt="Base Template" /></p>
<p>Make a change to <em>Index.cshtml</em></p>
<pre><code>    &lt;h1 class=&quot;display-4&quot;&gt;Welcome To my Nascient Blazor App&lt;/h1&gt;
</code></pre>
<p>and save it.  We get:</p>
<pre><code>watch : Exited
watch : File changed: C:\Users\shaun\source\repos\BlazorServer\Pages\Index.cshtml
watch : Started
Building...
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: https://localhost:7280
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5280
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: C:\Users\shaun\source\repos\BlazorServer\
</code></pre>
<p><img src="./assets/Blazor-App/Base-modified-Template-Run.png" alt="Base Template" /></p>
<p>Hot reload is working. We have a running Razor web application.</p>
<p>To wrap up this section, let's take a quick look at <code>Program</code>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#57A64A;">// Initialise the WebApplication Builder</span>
<span style="color:#569CD6;">var</span> builder = WebApplication.CreateBuilder(args);

<span style="color:#57A64A;">// Add services to the container.</span>
builder.Services.AddRazorPages();

<span style="color:#57A64A;">// Build the App from the builder</span>
<span style="color:#569CD6;">var</span> app = builder.Build();

<span style="color:#57A64A;">// Configure the HTTP request pipeline.</span>
<span style="color:#569CD6;">if</span> (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler(<span style="color:#D69D85;">&quot;/Error&quot;</span>);
    app.UseHsts();
}
app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseRouting();
app.UseAuthorization();
app.MapRazorPages();

<span style="color:#57A64A;">// Run the Application</span>
app.Run();
</pre></div>
<p>This:</p>
<ol>
<li>Creates an instance of the <code>WebApplicationBuilder</code> class.</li>
<li>Adds a set of services to builder's ServiceCollection.  These define the services that can be used by the <code>WebApplication</code> instance's Dependency Injection container.</li>
<li>Builds the <code>WebApplication</code> instance.</li>
<li>Adds a set of Middleware to handle the web request pipeline serviced by the <code>WebApplication</code> instance.</li>
<li>Runs the configured <code>WebApplication</code> instance.</li>
</ol>
<h2 id="adding-a-blazor-component-to-a-razor-page">Adding a Blazor Component to a Razor Page</h2>
<p>Add a <em>Components</em> folder and a <em>/Component/HelloBlazor.razor</em> component file.</p>
<p>It just displays a message and the time.  We use the time so we can easily see if updates happen and when render events occur.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@inherits ComponentBase
@<span style="color:#569CD6;">namespace</span> Blazr

&lt;div&gt;
    &lt;h1&gt;Hello Blazor at @(time.ToLongTimeString())&lt;/h1&gt;
    &lt;div <span style="color:#569CD6;">class</span>=<span style="color:#D69D85;">&quot;m-3&quot;</span>&gt;
        Todays Message <span style="color:#569CD6;">is</span> : @Message
    &lt;/div&gt;
    &lt;div <span style="color:#569CD6;">class</span>=<span style="color:#D69D85;">&quot;m-3&quot;</span>&gt;
        &lt;button <span style="color:#569CD6;">class</span>=<span style="color:#D69D85;">&quot;btn btn-primary&quot;</span> @onclick=<span style="color:#D69D85;">&quot;GetTime&quot;</span>&gt;Set Time&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

@code {
    [Parameter] <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">string</span> Message {<span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>;} = <span style="color:#569CD6;">string</span>.Empty;

    <span style="color:#569CD6;">private</span> DateTime time = DateTime.Now;

    <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">override</span> <span style="color:#569CD6;">void</span> OnInitialized() 
        =&gt;  time = DateTime.Now;

    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> GetTime() 
        =&gt; time = DateTime.Now;
}
</pre></div>
<p>Add a <em>Component.cshtml</em> to <em>Pages</em>.</p>
<pre><code>@page
@{
    ViewData[&quot;Title&quot;] = &quot;Component page&quot;;
}

&lt;div class=&quot;text-center&quot;&gt;
    &lt;h1 class=&quot;display-4&quot;&gt;Welcome To my Component Page&lt;/h1&gt;
    @(await Html.RenderComponentAsync&lt;Components.HelloBlazor&gt;(RenderMode.ServerPrerendered, new { Message = &quot;Hello there!&quot; }))

    &lt;script src=&quot;_framework/blazor.server.js&quot;&gt;&lt;/script&gt;
&lt;/div&gt;
</code></pre>
<p>In <em>_layout.cshtml</em> add a new top menu item:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-link text-dark&quot;</span> <span style="color:#FF0000;">asp-area</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;&quot; asp-page=&quot;/Component&quot;</span><span style="color:#569CD6;">&gt;</span>Component<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>You should now be able to navigate to <em>Component</em> and see the page render.  Click on the button and,  nothing happens.</p>
<p>We have a component that is statically rendered by the server.  However, there's no Blazor services configured.  Open Developer tools and you will see a JS error.</p>
<p><img src="./assets/Blazor-App/blazor-server-js-error.png" alt="JS Error" /></p>
<p>The Server has pre-rendered the component and then passed the generated markup to the browser.  What is failing is the Blazor Server JS code.  There's no <em>_framework/blazor.server.js</em> to download.</p>
<h2 id="configuring-the-server-to-run-the-blazor-services">Configuring the Server to run the Blazor Services</h2>
<p>First we add the Blazor server-side services.  Update <code>Program</code>:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#57A64A;">// Add services to the container.</span>
builder.Services.AddRazorPages();
builder.Services.AddServerSideBlazor();
</pre></div>
<p>Now check the browser and you will see two errors.  <em>blazor.server.js</em> is now available to download, but it can't run because there's no Blazor Hub Middleware running on the server to service the SignalR requests.</p>
<p>Now add the BlazorHub middleware to <code>Program</code>:</p>
<pre><code>app.MapRazorPages();
app.MapBlazorHub();
</code></pre>
<p>Everything now runs with no errors.  But the button click doesn't work:  the time doesn't update!</p>
<p>Go to <em>HelloBlazor.razor</em> and note that VS Code is have trouble recognising <code>@onclick</code>.  We need <em>Microsoft.AspNetCore.Components.Web</em> to sort that.</p>
<p><img src="./assets/Blazor-App/Component-No-Library.png" alt="onclick Error" /></p>
<p>Update <em>HelloBlazor.razor</em> by adding a using to the top of the file.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@inherits ComponentBase
@<span style="color:#569CD6;">namespace</span> Components
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Web  <span style="color:#57A64A;">// New</span>
</pre></div>
<p><img src="./assets/Blazor-App/Component-With-Library.png" alt="onclick Error" /></p>
<p>The button now works and updates the time.</p>
<p><img src="./assets/Blazor-App/Blazor-Component.png" alt="Base Template" /></p>
<p>We have a Blazor Component running our Razor Server side page.  A bit of Deja-Vu for old hands!</p>
<h2 id="building-a-blazor-spa">Building a Blazor SPA</h2>
<p>Components running in a Razor page isn't a Single Page Application.  Or is it?</p>
<p>Before we build the full version - as in the Blazor templates - we'll build a very simple SPA.</p>
<p>Add a <em>_Imports.razor</em> file to the project root and add the following code.  This sets up the global assemblies for all razor components.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@<span style="color:#569CD6;">using</span> System.Net.Http
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Authorization
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Authorization
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Forms
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Routing
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Web
@<span style="color:#569CD6;">using</span> Microsoft.AspNetCore.Components.Web.Virtualization
@<span style="color:#569CD6;">using</span> Microsoft.JSInterop
</pre></div>
<p>Add a <em>Routes</em> folder to the project and add the following razor components:</p>
<p><em>/Routes/Index.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@<span style="color:#569CD6;">namespace</span> Blazr

&lt;PageTitle&gt;Index&lt;/PageTitle&gt;

&lt;h1&gt;Hello, world!&lt;/h1&gt;

Welcome to your <span style="color:#569CD6;">new</span> app.
</pre></div>
<p><em>/Routes/Counter.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@<span style="color:#569CD6;">namespace</span> Blazr

&lt;PageTitle&gt;Counter&lt;/PageTitle&gt;

&lt;h1&gt;Counter&lt;/h1&gt;

&lt;p role=<span style="color:#D69D85;">&quot;status&quot;</span>&gt;Current count: @currentCount&lt;/p&gt;

&lt;button <span style="color:#569CD6;">class</span>=<span style="color:#D69D85;">&quot;btn btn-primary&quot;</span> @onclick=<span style="color:#D69D85;">&quot;IncrementCount&quot;</span>&gt;Click me&lt;/button&gt;

@code {
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">int</span> currentCount = <span style="color:#B5CEA8;">0</span>;

    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> IncrementCount()
     =&gt;  currentCount++;
}
</pre></div>
<p><em>/Routes/Hello.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@<span style="color:#569CD6;">namespace</span> Blazr

&lt;HelloBlazor&gt;&lt;/HelloBlazor&gt;
</pre></div>
<p>Add an <em>Apps</em> folder and add:</p>
<p><em>/Apps/BaseApp.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@using Microsoft.AspNetCore.Components;
@using Microsoft.AspNetCore.Components.Rendering;
@using Microsoft.AspNetCore.Components.Web;

@namespace Blazr

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">nav</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;navbar navbar-expand-lg navbar-light bg-light&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;container-fluid&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">h2</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;navbar-brand&quot;</span><span style="color:#569CD6;">&gt;</span>Blazor Simple App<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">h2</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;collapse navbar-collapse&quot;</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;navbarSupportedContent&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">ul</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;navbar-nav me-auto mb-2 mb-lg-0&quot;</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
                    &lt;a class=&quot; btn nav-link&quot; @onclick=&#39;() =&gt; this.ChangeRootComponent(&quot;Index&quot;)&#39;&gt;Index<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
                    &lt;a class=&quot;btn nav-link&quot; @onclick=&#39;() =&gt; this.ChangeRootComponent(&quot;Counter&quot;)&#39;&gt;Counter<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
                    &lt;a class=&quot;btn nav-link&quot; @onclick=&#39;() =&gt; this.ChangeRootComponent(&quot;Hello&quot;)&#39;&gt;Hello<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
                    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;btn nav-link &quot; @onclick=&quot;this.GoServerIndex&quot;</span><span style="color:#569CD6;">&gt;</span>Server Home<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">ul</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">nav</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;ms-5&quot;</span><span style="color:#569CD6;">&gt;</span>
    @body
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@code {
    [Inject] <span style="color:#569CD6;">private</span> NavigationManager? NavManager { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }

    <span style="color:#569CD6;">private</span> Dictionary&lt;<span style="color:#569CD6;">string</span>, Type&gt; Routes =&gt; <span style="color:#569CD6;">new</span> Dictionary&lt;<span style="color:#569CD6;">string</span>, Type&gt; {
        {<span style="color:#D69D85;">&quot;Index&quot;</span>, <span style="color:#569CD6;">typeof</span>(Blazr.Index)},
        {<span style="color:#D69D85;">&quot;Counter&quot;</span>, <span style="color:#569CD6;">typeof</span>(Blazr.Counter)},
        {<span style="color:#D69D85;">&quot;Hello&quot;</span>, <span style="color:#569CD6;">typeof</span>(Blazr.Hello)}
    };

    <span style="color:#569CD6;">private</span> Type rootComponent = <span style="color:#569CD6;">typeof</span>(Blazr.Index);

    <span style="color:#569CD6;">private</span> RenderFragment body =&gt; (RenderTreeBuilder builder) =&gt;
    {
        builder.OpenComponent(<span style="color:#B5CEA8;">0</span>, rootComponent);
        builder.CloseComponent();
    };

    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">void</span> ChangeRootComponent(<span style="color:#569CD6;">string</span> route)
    {
        <span style="color:#569CD6;">if</span> (Routes.ContainsKey(route))
        {
            rootComponent = Routes[route];
            StateHasChanged();
        }
    }

    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">void</span> GoServerIndex()
    =&gt; <span style="color:#569CD6;">this</span>.NavManager?.NavigateTo(<span style="color:#D69D85;">&quot;/Index&quot;</span>, <span style="color:#569CD6;">true</span>);
}
</pre></div>
<p><code>rootComponent</code> is the <code>Type</code> of component to render: the default is <code>Index.razor</code>.  The Nav bar calls <code>ChangeRootComponent</code> which changes <code>rootComponent</code> and requests a component re-render by calling <code>StateHasChanged</code>.</p>
<p><code>body</code> is a <code>RenderFragment</code> that simply adds <code>rootComponent</code> to the render tree and renders it.  In practice we would check that <code>rootComponent</code> implements <code>IComponent</code>: all components must implement <code>IComponent</code>.  I haven't implemented the code to keep things simple and easy to read.</p>
<p><code>GoHome</code> uses the <code>NavigationManager</code> to trigger a full browser reload, and thus loads the default server page.</p>
<p>Add a link to <em>_Layout.cshtml</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-link text-dark&quot;</span> <span style="color:#FF0000;">asp-area</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;&quot; asp-page=&quot;/SimpleBlazor&quot;</span><span style="color:#569CD6;">&gt;</span>Blazor Simple App<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>Add <em>/Pages/SimpleBlazor.cshtml</em></p>
<pre><code>@page
@{
    Layout = null;
}
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;@ViewData[&quot;Title&quot;] - BlazorServer&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;~/lib/bootstrap/dist/css/bootstrap.min.css&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;~/css/site.css&quot; asp-append-version=&quot;true&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;~/BlazorServer.styles.css&quot; asp-append-version=&quot;true&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
        @(await Html.RenderComponentAsync&lt;Blazr.BaseApp&gt;(RenderMode.ServerPrerendered))

    &lt;script src=&quot;_framework/blazor.server.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>You should now be able to navigate to the Simple App, and navigate between the top menu bar links.</p>
<p><img src="./assets/Blazor-App/Simple-Blazor.png" alt="Base Template" /></p>
<h3 id="section-summary">Section Summary</h3>
<p>We've created a server side razor page, loading a Blazor component as it's main content.  This component consists of a navigation bar and a sub-component.  Clicking on the links in the navigation bar just change out the sub-component.  <code>StateHasChanged</code> queues a re-render of the page on the Renderer's queue.  The Renderer runs the render (in reality a <code>RenderFragment</code> that represents the page), works out any differences between the old DOM and the new DOM, and passes those to the browser to update the browser displayed DOM.  No page navigation involved, just DOM changes.</p>
<h2 id="building-a-full-blazor-server-app">Building a Full Blazor Server App</h2>
<h3 id="adding-files-from-the-repo">Adding files from the Repo</h3>
<p>We need to add some files from the Blazor application.</p>
<p>Add a <em>/Routes/Shared</em> folder and add the following files from the Repo:</p>
<ul>
<li><em>MainLayout.razor</em></li>
<li><em>MainLayout.razor.css</em></li>
<li><em>NavMenu.razor</em></li>
<li><em>NavMenu.razor.css</em></li>
</ul>
<p>These are the standard files from the Blazor Template with the namespace set and the NavLinks tweaked.</p>
<p>Add the following file to wwwroot/css</p>
<ul>
<li>blazor-site.css</li>
</ul>
<p>This is the standard Blazor site file renamed.</p>
<h3 id="app-component">App Component</h3>
<p>Add <em>/Apps/App.razor</em> and add the out-of-the-box code.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@<span style="color:#569CD6;">namespace</span> Blazr
&lt;Router AppAssembly=<span style="color:#D69D85;">&quot;@typeof(App).Assembly&quot;</span>&gt;
    &lt;Found Context=<span style="color:#D69D85;">&quot;routeData&quot;</span>&gt;
        &lt;RouteView RouteData=<span style="color:#D69D85;">&quot;@routeData&quot;</span> DefaultLayout=<span style="color:#D69D85;">&quot;@typeof(MainLayout)&quot;</span> /&gt;
        &lt;FocusOnNavigate RouteData=<span style="color:#D69D85;">&quot;@routeData&quot;</span> Selector=<span style="color:#D69D85;">&quot;h1&quot;</span> /&gt;
    &lt;/Found&gt;
    &lt;NotFound&gt;
        &lt;PageTitle&gt;Not found&lt;/PageTitle&gt;
        &lt;LayoutView Layout=<span style="color:#D69D85;">&quot;@typeof(MainLayout)&quot;</span>&gt;
            &lt;p role=<span style="color:#D69D85;">&quot;alert&quot;</span>&gt;Sorry, there&#39;s nothing at <span style="color:#569CD6;">this</span> address.&lt;/p&gt;
        &lt;/LayoutView&gt;
    &lt;/NotFound&gt;
&lt;/Router&gt;
</pre></div><h3 id="routing">Routing</h3>
<p>For routing to work, we need to add router page attributes to components we want the Router to treat as routes.</p>
<p>Update the following components, adding a page route.  A component can have more than one route.</p>
<p><em>Routes/Index.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page &quot;/&quot;
@page &quot;/App&quot;
......
</pre></div>
<p><em>Routes/Counter.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page &quot;/Counter&quot;
......
</pre></div>
<p><em>Routes/Hello.razor</em></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page &quot;/Hello&quot;
......
</pre></div><h3 id="razor-server-side-pages">Razor Server-Side Pages</h3>
<p>Add <em>/Pages/Shared/_AppLayout.cshtml</em>.</p>
<p>This is the Blazor Server launch page, with a tweeked stylesheet setup.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@using Microsoft.AspNetCore.Components.Web
@namespace Layouts
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<span style="color:#569CD6;">&lt;!</span><span style="color:#A31515;">DOCTYPE</span> <span style="color:#FF0000;">html</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">html</span> <span style="color:#FF0000;">lang</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;en&quot;</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">head</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">meta</span> <span style="color:#FF0000;">charset</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;utf-8&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">meta</span> <span style="color:#FF0000;">name</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;viewport&quot;</span> <span style="color:#FF0000;">content</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;width=device-width, initial-scale=1.0&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">base</span> <span style="color:#FF0000;">href</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;~/&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">link</span> <span style="color:#FF0000;">rel</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;stylesheet&quot;</span> <span style="color:#FF0000;">href</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;~/lib/bootstrap/dist/css/bootstrap.min.css&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">link</span> <span style="color:#FF0000;">href</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;css/blazor-site.css&quot;</span> <span style="color:#FF0000;">rel</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;stylesheet&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">link</span> <span style="color:#FF0000;">href</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;BlazorServer.styles.css&quot;</span> <span style="color:#FF0000;">rel</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;stylesheet&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">component</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;typeof(HeadOutlet)&quot;</span> <span style="color:#FF0000;">render-mode</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;ServerPrerendered&quot;</span> <span style="color:#569CD6;">/&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">head</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">body</span><span style="color:#569CD6;">&gt;</span>
    @RenderBody()

    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;blazor-error-ui&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">environment</span> <span style="color:#FF0000;">include</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Staging,Production&quot;</span><span style="color:#569CD6;">&gt;</span>
            An error has occurred. This application may no longer respond until reloaded.
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">environment</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">environment</span> <span style="color:#FF0000;">include</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Development&quot;</span><span style="color:#569CD6;">&gt;</span>
            An unhandled exception has occurred. See browser dev tools for details.
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">environment</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">href</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;&quot; class=&quot;reload&quot;</span><span style="color:#569CD6;">&gt;</span>Reload<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;dismiss&quot;</span><span style="color:#569CD6;">&gt;</span>&#128473;<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>

    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">script</span> <span style="color:#FF0000;">src</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;_framework/blazor.server.js&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">script</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">body</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">html</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>Add <em>/Pages/App.cshtml</em>.</p>
<p>This is the Blazor App launch page.  We specify <code>Blazor.App</code> as the launch class i.e. <em>App.razor</em>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page 
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = &quot;_AppLayout&quot;;
}

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">component</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;typeof(Blazr.App)&quot;</span> <span style="color:#FF0000;">render-mode</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;ServerPrerendered&quot;</span> <span style="color:#569CD6;">/&gt;</span>

</pre></div><h3 id="navigation-changes">Navigation Changes</h3>
<p>Update <em>/Routes/Shared/NavMenu.razor</em></p>
<p>Add a new NavLink.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item px-3&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">NavLink</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;btn nav-link&quot; @onclick=&quot;GoServerIndex&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">span</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;oi oi-list-rich&quot;</span> <span style="color:#FF0000;">aria-hidden</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;true&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">span</span><span style="color:#569CD6;">&gt;</span> Server Home
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">NavLink</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>And add the <code>GoServerIndex</code> method to &quot;hard&quot; navigate to the server-side home page.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">void</span> GoServerIndex()
        =&gt; <span style="color:#569CD6;">this</span>.NavManager?.NavigateTo(<span style="color:#D69D85;">&quot;/Index&quot;</span>, <span style="color:#569CD6;">true</span>);
</pre></div><h3 id="web-changes">Web Changes</h3>
<p>Add a new link to the main page navigation in <em>/Pages/Shared/_Layout.cshtml</em>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">li</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-item&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">a</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;nav-link text-dark&quot;</span> <span style="color:#FF0000;">asp-area</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;&quot; asp-page=&quot;/App&quot;</span><span style="color:#569CD6;">&gt;</span>Blazor App<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">a</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">li</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>Add a Fallback page endpoint to <code>Program</code>.  All fallbacks are directed to the Blazor Application.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#57A64A;">//.....</span>
app.MapBlazorHub();
app.MapFallbackToPage(<span style="color:#D69D85;">&quot;/App&quot;</span>);

app.Run();
</pre></div>
<p>You should now be able to navigate to the application and F5 to reload it.</p>
<h3 id="section-summary-1">Section Summary</h3>
<p>We now have a full blown Blazor Server application running with routing.  It's important to differentiate between Blazor Routing and Browser Navigation.  One way to physically detect the difference is to watch the &quot;Refresh&quot; button in the toolbar - the circle next to the forward button.  You can see it activate when you have a browser navigation event.</p>
<p>Routing occurs when you click the left Nav Menu in the Blazor application.  You may be clicking on an <code>anchor</code>, but the browser event is intercepted by the Blazor Javascript code, and received by the <code>Router</code> component.  It has a dictionary of Routes/Component - built by finding all the components with an <code>@page</code> attribute in the current assembly.  It looks up the component against the route, and loads the new component.  We created a very simple version of this in the Simple Blazor component.</p>
<h2 id="setting-the-blazor-app-as-default">Setting the Blazor App as Default</h2>
<p>The current setup has an <code>Index.cshtml</code> page with no <code>@page</code> set.  This is the default page for the site <em>https://localhost:nnnnn/</em>.</p>
<p>If there is a Blazor route component set as <code>@page &quot;/&quot;</code> why doesn't it use it?  This is where calling Blazor components with a route attribute &quot;Pages&quot; causes confusion.  Don't call them anything but a page: Routes, RouteComponents or RouteViews.  The web server knows nothing about the Blazor Routes.  The request runs through the configured middleware pipeline in Program. In our setup <code>app.MapRazorPages()</code> maps the Razor pages in <em>Pages</em> to the web route.  If it finds an index or default web file it uses it.</p>
<p>To understand what's happening look at the endpoint mapping in <code>Program</code></p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>

app.MapRazorPages();
app.MapBlazorHub();
app.MapFallbackToPage(<span style="color:#D69D85;">&quot;/App&quot;</span>);

app.Run();
</pre></div>
<p>The current <code>Index.cshtml</code> is considered a default page and MapRazorPages() returns it.</p>
<p>To change our setup, set the page attribute on <em>Index.cshtml</em>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page &quot;/index&quot;
@model IndexModel
</pre></div>
<p><code>MapRazorPages</code> now maps <code>Index.cshtml</code> to <em>https://localhost:nnnnn/Index</em> and no longer treats it as a default page.</p>
<p>The request hits <code>app.MapFallbackToPage(&quot;/App&quot;)</code> which returns <code>App.cshtml</code> our Blazor App startup page.</p>
<h3 id="navigation-within-a-blazor-app">Navigation within a Blazor App</h3>
<p>So what happens if we have a link in the Blazor App that navigates to the web server <em>Index</em>?  We can see this <code>NavMenu</code>.</p>
<p>If we were to code <code>GoServerIndex</code> like this:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">void</span> GoServerIndex()
        =&gt; <span style="color:#569CD6;">this</span>.NavManager?.NavigateTo(<span style="color:#D69D85;">&quot;/Index&quot;</span>);
</pre></div>
<p>Blazor treats the request as local so routes, rather than navigates.  The router can't find a route match so displays it's &quot;Sorry, there's nothing at this address.&quot; message.</p>
<p>To &quot;hard&quot; navigate we need to do this:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">void</span> GoServerIndex()
        =&gt; <span style="color:#569CD6;">this</span>.NavManager?.NavigateTo(<span style="color:#D69D85;">&quot;/Index&quot;</span>, <span style="color:#569CD6;">true</span>);
</pre></div>
<p>This forces the <code>NavigationManager</code> to navigate, not route.</p>
<h2 id="summary">Summary</h2>
<p>There are a few tweeks I've made that make my implementation different from the out-of-the-box template.  These are:</p>
<ol>
<li>I've removed FetchData, it just complicates things.</li>
<li>The App <code>NavMenu</code> points Index to <em>/App</em> and not <em>/</em>.</li>
<li><em>Index.razor</em> has an added <code>@page &quot;/App&quot;</code>.</li>
<li>All the Blazor <em>Pages</em> components are now in <em>Routes</em>.</li>
</ol>
<p>2 and 3 fix the &quot;default page problem&quot; i.e. the default page is the server razor file, not the Blazor Application.</p>
</div></div></div></body></html>





