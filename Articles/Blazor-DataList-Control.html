<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<base href="/">

	

	

	
	<link href="/resources/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

	
	<link href="/resources/css/sb-admin-2.css" rel="stylesheet" type="text/css">
	<link href="/resources/css/site.css" rel="stylesheet" type="text/css">

	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
	<link rel="stylesheet" href="/resources/css/article.css" type="text/css">

	
	<link rel="icon" href="/assets/favicon.png">

	<title>A Blazor DataList Control</title>
        <meta property="author" content="Shaun Curtis" />
        <meta property="description" content="This article describes how to build an input control based on a DataList in Blazor, and make it behave like a Select.  Along the way it looks at how `InputBase` controls are built and work." />
    <meta property="og:site_name" content="Cold Elm Coders" />
        <meta property="og:site" content="https://shauncurtis.github.io/" />
        <meta property="og:title" content="A Blazor DataList Control" />
        <meta property="og:description" content="This article describes how to build an input control based on a DataList in Blazor, and make it behave like a Select.  Along the way it looks at how `InputBase` controls are built and work." /></head>
<body><header class="navbar bg-dark p-2 text-large text-light"><section class="navbar-section  text-light"><a href="/" class="navbar-brand mr-2 text-large text-light p-2">Cold Elm Coders</a>
			<a href="/Posts" class="btn btn-link text-light">Posts</a>
			<a href="/Rants" class="btn btn-link text-light">Rants</a>
			<a href="/Articles" class="btn btn-link text-light">Articles</a>
			<a href="/Stories" class="btn btn-link text-light">Stories</a>
			<a href="/about.html" class="btn btn-link text-light">About</a></section></header>

	<div class="container-fluid"><div class="row"><div class="col-12 col-sm-3 col-lg-2 bg-light pt-2"><div class="article-info p-2"><div class="mb-2">Published: 01-Oct-2020</div>
                <div class="mb-2">Updated: 01-Oct-2020</div>
                <div class="mb-2">Author: Shaun Curtis</div></div>
    <h4 class="p-2">Table of Contents</h4>
<ul class="TOC" >
<li class="TOC-item TOC-item-0" >
<a class="TOC-link" href="#">Top</a>
<ul class="TOC TOC-0" >
<li class="TOC-item TOC-item-1" >
<ul class="TOC TOC-1" >
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#the-html-datalist">The Html DataList</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#example-site-and-code-repository">Example Site and Code Repository</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#exploring-binding-in-a-test-control">Exploring binding in a Test Control</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#inputbase">InputBase</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#building-our-datalist-control">Building our DataList Control</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#input-search-select-control">Input Search Select Control</a>
</li>
<li class="TOC-item TOC-item-2" >
<a class="TOC-link" href="#wrap-up">Wrap Up</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
			
			<div class="col-12 col-sm-9 col-lg-10 p-2"><div class="pt-2 pb-2 border-bottom mb-4 text-primary"><h1>A Blazor DataList Control</h1>
            <div><small>This article describes how to build an input control based on a DataList in Blazor, and make it behave like a Select.  Along the way it looks at how `InputBase` controls are built and work.</small></div></div>
    <p>This article describes how to build an input control based on a DataList in Blazor, and make it behave like a Select.  <em>DataList</em> apppeared in HTML5.  Some browsers, particularly Safari were slow on the uptake, so usage was a bit problematic in the early days of HTML5.  Today, all the major browsers on various platforms support it: you can see the support list <a href="https://caniuse.com/?search=datalist">here</a>.</p>
<p>We'll build two versions of the control using Blazor's <code>InputBase</code> as the base class to fit into the existing edit form framework.  Along the way we delve into the inner workings of <code>InputBase</code> and explore control binding.</p>
<h2 id="the-html-datalist">The Html DataList</h2>
<p>When <code>Input</code> is linked to a <code>datalist</code>, it makes filtered suggestions as the user types based on the <code>datalist</code>.  Out-of-the-box, the user can select a suggestion or enter any text value.  The basic markup for the control is shown below.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">input</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;text&quot;</span> <span style="color:#FF0000;">list</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;countrylist&quot;</span> <span style="color:#569CD6;">/&gt;</span>

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">datalist</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;countrylist&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">option</span> <span style="color:#FF0000;">value</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Algeria&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">option</span> <span style="color:#FF0000;">value</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Australia&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">option</span> <span style="color:#FF0000;">value</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Austria&quot;</span> <span style="color:#569CD6;">/&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">datalist</span><span style="color:#569CD6;">&gt;</span>
</pre></div><h2 id="example-site-and-code-repository">Example Site and Code Repository</h2>
<p>The code is in a my <a href="https://github.com/ShaunCurtis/Blazor.Database/">Blazor.Database</a> repository <a href="https://github.com/ShaunCurtis/Blazor.Database/tree/master/Blazor.SPA/Components/FormControls">here in Blazor.SPA/Components/FormControls</a></p>
<p>The controls can be seen in action <a href="https://cec-blazor-database.azurewebsites.net/editorcontrols">here on my Blazor.Database Demo Site</a>.</p>
<h2 id="exploring-binding-in-a-test-control">Exploring binding in a Test Control</h2>
<p>Before we build our controls, let's explore what's going on in bindings.  You can skip this section if you know your bind triumvirate.</p>
<p>Start with a standard Razor component and code behind file - <em>MyInput.razor</em> and <em>MyInput.Razor.cs</em>.</p>
<p>Add the following code to <em>MyInput.razor.cs</em>.</p>
<ol>
<li>We have what is known as the &quot;Triumverate&quot; of bind properties.
<ol>
<li><code>Value</code> is the actual value to display.</li>
<li><code>ValueChanged</code> is a Callback that gets wired up to set the value in the parent.</li>
<li><code>ValueExpression</code> is a lambda expression that points back to the source property in the parent.  It's used to generate a <code>FieldIdentifier</code> used in validation and state management to uniquely identify the field.</li>
</ol>
</li>
<li><code>CurrentValue</code> is the control internal <em>Value</em>.  It updates <code>Value</code> and invokes <code>ValueChanged</code> when changed.</li>
<li><code>AdditionalAttributes</code> is used to capture the class and other attributes added to the control.</li>
</ol>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">namespace</span> MyNameSpace.Components
{
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">partial</span> <span style="color:#569CD6;">class</span> MyInput
    {
        [Parameter] <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">string</span> Value { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }
        [Parameter] <span style="color:#569CD6;">public</span> EventCallback&lt;<span style="color:#569CD6;">string</span>&gt; ValueChanged { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }
        [Parameter] <span style="color:#569CD6;">public</span> Expression&lt;Func&lt;<span style="color:#569CD6;">string</span>&gt;&gt; ValueExpression { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }
        [Parameter(CaptureUnmatchedValues = <span style="color:#569CD6;">true</span>)] <span style="color:#569CD6;">public</span> IReadOnlyDictionary&lt;<span style="color:#569CD6;">string</span>, <span style="color:#569CD6;">object</span>&gt; AdditionalAttributes { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }

        <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">virtual</span> <span style="color:#569CD6;">string</span> CurrentValue
        {
            <span style="color:#569CD6;">get</span> =&gt; Value;
            <span style="color:#569CD6;">set</span>
            {
                <span style="color:#569CD6;">if</span> (!value.Equals(<span style="color:#569CD6;">this</span>.Value))
                {
                    Value = value;
                    <span style="color:#569CD6;">if</span> (ValueChanged.HasDelegate)
                        _ = ValueChanged.InvokeAsync(value);
                }
            }
        }
    }
}
</pre></div>
<p>Add a Text <code>input</code> html control to the razor file.</p>
<ol>
<li>Namespace is added so <em>Components</em> can be divided into subfolders as the number of source files grow.</li>
<li><code>@bind-value</code> points to the controls <code>CurrentValue</code> property.</li>
<li><code>@attributes</code> adds the control attributes to <code>input</code>.</li>
</ol>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@namespace MyNameSpace.Components

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">input</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;text&quot; @bind-value=&quot;this.CurrentValue&quot; @attributes=&quot;this.AdditionalAttributes&quot;</span> <span style="color:#569CD6;">/&gt;</span>
</pre></div><h4 id="test-page">Test Page</h4>
<p>Add a Test page to <em>Pages</em> - or overwrite index if you're using a test site.  We'll use this for testing all the controls.</p>
<p>This doesn't need much explanation.  Bootstrap for formatting, classic <code>EditForm</code>.  <code>CheckButton</code> gives us a easy breakpoint we can hit to check values and objects.</p>
<p>You can see our <code>MyInput</code> in the form.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@page &quot;/&quot;

@using MyNameSpace.Components

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">EditForm</span> <span style="color:#FF0000;">Model</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;this.model&quot;</span> <span style="color:#FF0000;">OnValidSubmit</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;this.ValidSubmit&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;container m-5 p-4 border border-secondary&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-12&quot;</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">h2</span><span style="color:#569CD6;">&gt;</span>Test Editor<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">h2</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span> <span style="color:#FF0000;">for</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;txtcountry&quot;</span><span style="color:#569CD6;">&gt;</span>
                Country
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">MyInput</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;txtcountry&quot; @bind-Value=&quot;model.Value&quot;</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;form-control&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">MyInput</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-6&quot;</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-6 text-right&quot;</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">button</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;btn btn-secondary&quot; @onclick=&quot;(e) =&gt; this.CheckButton()&quot;</span><span style="color:#569CD6;">&gt;</span>Check<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">button</span><span style="color:#569CD6;">&gt;</span>
                <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">button</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;submit&quot;</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;btn btn-primary&quot;</span><span style="color:#569CD6;">&gt;</span>Submit<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">button</span><span style="color:#569CD6;">&gt;</span>
            <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">EditForm</span><span style="color:#569CD6;">&gt;</span>

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;container&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span><span style="color:#569CD6;">&gt;</span>
            Test Value
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-control&quot;</span><span style="color:#569CD6;">&gt;</span>
            @this.model.Value
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span><span style="color:#569CD6;">&gt;</span>
            Test Index
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-control&quot;</span><span style="color:#569CD6;">&gt;</span>
            @this.model.index
        <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@code {

    Model model = <span style="color:#569CD6;">new</span> Model() { Value = <span style="color:#D69D85;">&quot;Australia&quot;</span>, index = <span style="color:#B5CEA8;">2</span> };

    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> CheckButton()
    {
        <span style="color:#569CD6;">var</span> x = <span style="color:#569CD6;">true</span>;
    }

    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> ValidSubmit()
    {
        <span style="color:#569CD6;">var</span> x = <span style="color:#569CD6;">true</span>;
    }

    <span style="color:#569CD6;">class</span> Model
    {
        <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">string</span> Value { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#569CD6;">string</span>.Empty;
        <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">int</span> index { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#B5CEA8;">0</span>;
    }
}
</pre></div>
<p>Note the value display update as you change the text in <code>MyInput</code>.</p>
<p>Under the hood the Razor compiler builds the section containing <code>MyInput</code> into component code like this:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
__builder2.OpenComponent&lt;TestBlazorServer.Components.MyInput&gt;(<span style="color:#B5CEA8;">12</span>);
__builder2.AddAttribute(<span style="color:#B5CEA8;">13</span>, <span style="color:#D69D85;">&quot;id&quot;</span>, <span style="color:#D69D85;">&quot;txtcountry&quot;</span>);
__builder2.AddAttribute(<span style="color:#B5CEA8;">14</span>, <span style="color:#D69D85;">&quot;class&quot;</span>, <span style="color:#D69D85;">&quot;form-control&quot;</span>);
__builder2.AddAttribute(<span style="color:#B5CEA8;">15</span>, <span style="color:#D69D85;">&quot;Value&quot;</span>, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck&lt;System.String&gt;(model.Value));
__builder2.AddAttribute(<span style="color:#B5CEA8;">16</span>, <span style="color:#D69D85;">&quot;ValueChanged&quot;</span>, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck&lt;Microsoft.AspNetCore.Components.EventCallback&lt;System.String&gt;&gt;(Microsoft.AspNetCore.Components.EventCallback.Factory.Create&lt;System.String&gt;(<span style="color:#569CD6;">this</span>, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(<span style="color:#569CD6;">this</span>, __value =&gt; model.Value = __value, model.Value))));
__builder2.AddAttribute(<span style="color:#B5CEA8;">17</span>, <span style="color:#D69D85;">&quot;ValueExpression&quot;</span>, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck&lt;System.Linq.Expressions.Expression&lt;System.Func&lt;System.String&gt;&gt;&gt;(() =&gt; model.Value));
__builder2.CloseComponent();
</pre></div>
<p>You can see the compiled c# file in the <em>obj</em> folder.  On my project this is <em>\obj\Debug\net5.0\RazorDeclaration\Components\FormControls</em>.</p>
<p><code>@bind-value</code> has translated into a full mapping to the <code>Value</code>, <code>ValueChanged</code> and <code>ValueExpression</code> triumvirate. The setting of <code>Value</code> and <code>ValueExpression</code> are self explanatory.  <code>ValueChanged</code> uses a code factory to generate a runtime method that maps to <code>ValueChanged</code> and sets model.Value to the value returned by <code>ValueChanged</code>.</p>
<p>This explains a common misconception - you can attach an event handler to <code>@onchange</code> like this:</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">input</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;text&quot; @bind-value =&quot;model.Value&quot; @onchange=&quot;(e) =&gt; myonchangehandler()&quot;</span><span style="color:#569CD6;">/&gt;</span>
</pre></div>
<p>There's no <code>@onchange</code> event on the control, and the one on the inner control is already bound so can't be bound a second time.  You get no error message, just no trigger.</p>
<h2 id="inputbase">InputBase</h2>
<p>Let's move on to <code>InputBase</code>.</p>
<p>First we'll look at <code>InputText</code> to see an implementation.</p>
<ol>
<li>The Html <em>input</em> <code>value</code> is bound to <code>CurrentValue</code> and <code>onchange</code> event to <code>CurrentValueAsString</code>.  Any change in the value calls the setter for <code>CurrentValueASsString</code>.</li>
<li><code>TryParseValueFromString</code> just passes on <code>value</code> (the entered value) as <code>result</code>.  There's no string to other type conversion to do.</li>
</ol>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">public</span> <span style="color:#569CD6;">class</span> InputText : InputBase&lt;<span style="color:#569CD6;">string</span>?&gt;
{
    [DisallowNull] <span style="color:#569CD6;">public</span> ElementReference? Element { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">set</span>; }

    <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">override</span> <span style="color:#569CD6;">void</span> BuildRenderTree(RenderTreeBuilder builder)
    {
        builder.OpenElement(<span style="color:#B5CEA8;">0</span>, <span style="color:#D69D85;">&quot;input&quot;</span>);
        builder.AddMultipleAttributes(<span style="color:#B5CEA8;">1</span>, AdditionalAttributes);
        builder.AddAttribute(<span style="color:#B5CEA8;">2</span>, <span style="color:#D69D85;">&quot;class&quot;</span>, CssClass);
        builder.AddAttribute(<span style="color:#B5CEA8;">3</span>, <span style="color:#D69D85;">&quot;value&quot;</span>, BindConverter.FormatValue(CurrentValue));
        builder.AddAttribute(<span style="color:#B5CEA8;">4</span>, <span style="color:#D69D85;">&quot;onchange&quot;</span>, EventCallback.Factory.CreateBinder&lt;<span style="color:#569CD6;">string</span>?&gt;(<span style="color:#569CD6;">this</span>, __value =&gt; CurrentValueAsString = __value, CurrentValueAsString));
        builder.AddElementReferenceCapture(<span style="color:#B5CEA8;">5</span>, __inputReference =&gt; Element = __inputReference);
        builder.CloseElement();
    }

    <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">override</span> <span style="color:#569CD6;">bool</span> TryParseValueFromString(<span style="color:#569CD6;">string</span>? value, <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span>? result, [NotNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span>? validationErrorMessage)
    {
        result = value;
        validationErrorMessage = <span style="color:#569CD6;">null</span>;
        <span style="color:#569CD6;">return</span> <span style="color:#569CD6;">true</span>;
    }
}
</pre></div>
<p>Let's delve into <code>InputBase</code>.</p>
<p>The <code>onchange</code> event sets <code>CurrentValueAsString</code>. Note it's not virtual, so can't be overidden.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">string</span>? CurrentValueAsString
{
    <span style="color:#569CD6;">get</span> =&gt; FormatValueAsString(CurrentValue);
    <span style="color:#569CD6;">set</span>
    {
        <span style="color:#57A64A;">// clear the ValidationMessageStore</span>
        _parsingValidationMessages?.Clear();

        <span style="color:#569CD6;">bool</span> parsingFailed;

        <span style="color:#57A64A;">// Error if can&#39;t be null and value is null. </span>
        <span style="color:#569CD6;">if</span> (_nullableUnderlyingType != <span style="color:#569CD6;">null</span> &amp;&amp; <span style="color:#569CD6;">string</span>.IsNullOrEmpty(value))
        {
            parsingFailed = <span style="color:#569CD6;">false</span>;
            CurrentValue = <span style="color:#569CD6;">default</span>!;
        }
        <span style="color:#57A64A;">// Call TryParseValueFromString.  </span>
        <span style="color:#569CD6;">else</span> <span style="color:#569CD6;">if</span> (TryParseValueFromString(value, <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">var</span> parsedValue, <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">var</span> validationErrorMessage))
        {
            <span style="color:#57A64A;">// If we pass complete and set CurrentValue</span>
            parsingFailed = <span style="color:#569CD6;">false</span>;
            CurrentValue = parsedValue!;
        }
        <span style="color:#569CD6;">else</span>
        {   
            <span style="color:#57A64A;">// We reach here if we fail parsing</span>
            <span style="color:#57A64A;">// set flags and make sure we have a ValidationMessageStore</span>
            parsingFailed = <span style="color:#569CD6;">true</span>;
            
            <span style="color:#569CD6;">if</span> (_parsingValidationMessages == <span style="color:#569CD6;">null</span>)
            {
                _parsingValidationMessages = <span style="color:#569CD6;">new</span> ValidationMessageStore(EditContext);
            }
            <span style="color:#57A64A;">// Add a parsing error message to the store</span>
            _parsingValidationMessages.Add(FieldIdentifier, validationErrorMessage);

            <span style="color:#57A64A;">// Since we&#39;re not writing to CurrentValue, we&#39;ll need to notify about modification from here</span>
            EditContext.NotifyFieldChanged(FieldIdentifier);
        }

        <span style="color:#57A64A;">// skip the validation notification if we were previously valid and still are</span>
        <span style="color:#57A64A;">// if we failed this time notify </span>
        <span style="color:#57A64A;">// if we failed last time but are ok now we need notify to get the validation controls cleared</span>
        <span style="color:#569CD6;">if</span> (parsingFailed || _previousParsingAttemptFailed)
        {
            EditContext.NotifyValidationStateChanged();
            _previousParsingAttemptFailed = parsingFailed;
        }
    }
}
</pre></div>
<p>The input <code>value</code> binds to the <code>CurrentValue</code> getter, and <code>CurrentValueAsString</code> sets it.  Note again it's not <code>virtual</code> so no overide.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
    <span style="color:#569CD6;">protected</span> TValue? CurrentValue
    {
        <span style="color:#57A64A;">// straight getter from Value</span>
        <span style="color:#569CD6;">get</span> =&gt; Value;
        <span style="color:#569CD6;">set</span>
        {
            <span style="color:#57A64A;">// Checks for equality between submitted value and class Value</span>
            <span style="color:#569CD6;">var</span> hasChanged = !EqualityComparer&lt;TValue&gt;.Default.Equals(value, Value);
            <span style="color:#57A64A;">// and if it&#39;s changed</span>
            <span style="color:#569CD6;">if</span> (hasChanged)
            {
                <span style="color:#57A64A;">// sets the class Value</span>
                Value = value;
                <span style="color:#57A64A;">// calls the ValueChanged EventHandler to update the parent value</span>
                _ = ValueChanged.InvokeAsync(Value);
                <span style="color:#57A64A;">// Notifies the EditContext that the field has changed and passes the FieldIdentifier</span>
                EditContext.NotifyFieldChanged(FieldIdentifier);
            }
        }
    }
</pre></div>
<p>Finally, <code>TryParseValueFromString</code> is abstract so must be implemented in inherited classes.  It's purpose is to validate and convert the submitted string to the correct <code>TValue</code>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">abstract</span> <span style="color:#569CD6;">bool</span> TryParseValueFromString(<span style="color:#569CD6;">string</span>? value, [MaybeNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> TValue result, [NotNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span>? validationErrorMessage);
</pre></div><h2 id="building-our-datalist-control">Building our DataList Control</h2>
<p>First we need a helper class to get the country list.  Get the full class from the Repo.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">using</span> System.Collections.Generic;

<span style="color:#569CD6;">namespace</span> MyNameSpace.Data
{
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">static</span> <span style="color:#569CD6;">class</span> Countries
    {
        <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">static</span> List&lt;KeyValuePair&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt;&gt; CountryList
        {
            <span style="color:#569CD6;">get</span>
            {
                List&lt;KeyValuePair&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt;&gt; list = <span style="color:#569CD6;">new</span> List&lt;KeyValuePair&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt;&gt;();
                <span style="color:#569CD6;">var</span> x = <span style="color:#B5CEA8;">1</span>;
                <span style="color:#569CD6;">foreach</span> (<span style="color:#569CD6;">var</span> v <span style="color:#569CD6;">in</span> CountryArray)
                {
                    list.Add(<span style="color:#569CD6;">new</span> KeyValuePair&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt;(x, v));
                    x++;
                }
                <span style="color:#569CD6;">return</span> list;
            }
        }

        <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">static</span> SortedDictionary&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt; CountryDictionary
        {
            <span style="color:#569CD6;">get</span>
            {
                SortedDictionary&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt; list = <span style="color:#569CD6;">new</span> SortedDictionary&lt;<span style="color:#569CD6;">int</span>, <span style="color:#569CD6;">string</span>&gt;();
                <span style="color:#569CD6;">var</span> x = <span style="color:#B5CEA8;">1</span>;
                <span style="color:#569CD6;">foreach</span> (<span style="color:#569CD6;">var</span> v <span style="color:#569CD6;">in</span> CountryArray)
                {
                    list.Add(x, v);
                    x++;
                }
                <span style="color:#569CD6;">return</span> list;
            }
        }

        <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">static</span> <span style="color:#569CD6;">string</span>[] CountryArray = <span style="color:#569CD6;">new</span> <span style="color:#569CD6;">string</span>[]
        {
            <span style="color:#D69D85;">&quot;Afghanistan&quot;</span>,
            <span style="color:#D69D85;">&quot;Albania&quot;</span>,
            <span style="color:#D69D85;">&quot;Algeria&quot;</span>,
.....
            <span style="color:#D69D85;">&quot;Zimbabwe&quot;</span>,
        };
    }
}
</pre></div><h3 id="build-the-control">Build the control</h3>
<p>This is the partial class, setting <code>TValue</code> as a <code>string</code>.  There are inline explanation notes.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">public</span> <span style="color:#569CD6;">partial</span> <span style="color:#569CD6;">class</span> InputDataList : InputBase&lt;<span style="color:#569CD6;">string</span>&gt;
{
    <span style="color:#57A64A;">// List of values for datalist</span>
    [Parameter] <span style="color:#569CD6;">public</span> IEnumerable&lt;<span style="color:#569CD6;">string</span>&gt; DataList { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }
        
    <span style="color:#57A64A;">// parameter to restrict valid values to the list</span>
    [Parameter] <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">bool</span> RestrictToList { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }

    <span style="color:#57A64A;">// unique id for the datalist based on a guid - we may have more than one in a form</span>
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">string</span> dataListId { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = Guid.NewGuid().ToString();

    <span style="color:#57A64A;">// instruction to CurrentStringValue that we are in RestrictToList mode and the user has tabbed</span>
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">bool</span> _valueSetByTab = <span style="color:#569CD6;">false</span>;
    <span style="color:#57A64A;">// current typed value in the input box - kept up to date by UpdateEnteredText</span>
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">string</span> _typedText = <span style="color:#569CD6;">string</span>.Empty;

    <span style="color:#57A64A;">// New method to parallel CurrentValueAsString</span>
    <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">string</span> CurrentStringValue
    {
        <span style="color:#569CD6;">get</span>
        {
            <span style="color:#57A64A;">// check if we have a match to the datalist and get the value from the list</span>
            <span style="color:#569CD6;">if</span> (DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Any(item =&gt; item == <span style="color:#569CD6;">this</span>.Value))
                <span style="color:#569CD6;">return</span> DataList.First(item =&gt; item == <span style="color:#569CD6;">this</span>.Value);
            <span style="color:#57A64A;">// if not return an empty string</span>
            <span style="color:#569CD6;">else</span> <span style="color:#569CD6;">if</span> (RestrictToList)
                <span style="color:#569CD6;">return</span> <span style="color:#569CD6;">string</span>.Empty;
            <span style="color:#569CD6;">else</span>
                <span style="color:#569CD6;">return</span> _typedText;
        }
        <span style="color:#569CD6;">set</span>
        {
            <span style="color:#57A64A;">// Check if we have a ValidationMessageStore</span>
            <span style="color:#57A64A;">// Either get one or clear the existing one</span>
            <span style="color:#569CD6;">if</span> (_parsingValidationMessages == <span style="color:#569CD6;">null</span>)
                _parsingValidationMessages = <span style="color:#569CD6;">new</span> ValidationMessageStore(EditContext);
            <span style="color:#569CD6;">else</span>
                _parsingValidationMessages?.Clear(FieldIdentifier);

            <span style="color:#57A64A;">// Set defaults</span>
            <span style="color:#569CD6;">string</span> val = <span style="color:#569CD6;">string</span>.Empty;
            <span style="color:#569CD6;">var</span> _havevalue = <span style="color:#569CD6;">false</span>;
            <span style="color:#57A64A;">// check if we have a previous valid value - we&#39;ll stick with this is the current attempt to set the value is invalid</span>
            <span style="color:#569CD6;">var</span> _havepreviousvalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Contains(value);

            <span style="color:#57A64A;">// Set the value by tabbing in Strict mode.  We need to select the first entry in the DataList</span>
            <span style="color:#569CD6;">if</span> (_setValueByTab)
            {
                <span style="color:#569CD6;">if</span> (!<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(<span style="color:#569CD6;">this</span>._typedText))
                {
                    <span style="color:#57A64A;">// Check if we have at least one match in the filtered list</span>
                    _havevalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Any(item =&gt; item.Contains(_typedText, StringComparison.CurrentCultureIgnoreCase));
                    <span style="color:#569CD6;">if</span> (_havevalue)
                    {
                        <span style="color:#57A64A;">// the the first value</span>
                        <span style="color:#569CD6;">var</span> filteredList = DataList.Where(item =&gt; item.Contains(_typedText, StringComparison.CurrentCultureIgnoreCase)).ToList();
                        val = filteredList[<span style="color:#B5CEA8;">0</span>];
                    }
                }
            }
            <span style="color:#57A64A;">// Normal set</span>
            <span style="color:#569CD6;">else</span> <span style="color:#569CD6;">if</span> (<span style="color:#569CD6;">this</span>.RestrictToList)
            {
                <span style="color:#57A64A;">// Check if we have a match and set it if we do</span>
                _havevalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Contains(value);
                <span style="color:#569CD6;">if</span> (_havevalue)
                    val = DataList.First(item =&gt; item.Equals(value));
            }
            <span style="color:#569CD6;">else</span>
            {
                _havevalue = <span style="color:#569CD6;">true</span>;
                val = value;
            }

            <span style="color:#57A64A;">// check if we have a valid value</span>
            <span style="color:#569CD6;">if</span> (_havevalue)
            {
                <span style="color:#57A64A;">// assign it to current value - this will kick off a ValueChanged notification on the EditContext</span>
                <span style="color:#569CD6;">this</span>.CurrentValue = val;
                <span style="color:#57A64A;">// Check if the last entry failed validation.  If so notify the EditContext that validation has changed i.e. it&#39;s now clear</span>
                <span style="color:#569CD6;">if</span> (_previousParsingAttemptFailed)
                {
                    EditContext.NotifyValidationStateChanged();
                    _previousParsingAttemptFailed = <span style="color:#569CD6;">false</span>;
                }
            }
            <span style="color:#57A64A;">// We don&#39;t have a valid value</span>
            <span style="color:#569CD6;">else</span>
            {
                <span style="color:#57A64A;">// check if we&#39;re reverting to the last entry.  If we don&#39;t have one the generate error message</span>
                <span style="color:#569CD6;">if</span> (!_havepreviousvalue)
                {
                    <span style="color:#57A64A;">// No match so add a message to the message store</span>
                    _parsingValidationMessages?.Add(FieldIdentifier, <span style="color:#D69D85;">&quot;You must choose a valid selection&quot;</span>);
                    <span style="color:#57A64A;">// keep track of validation state for the next iteration</span>
                    _previousParsingAttemptFailed = <span style="color:#569CD6;">true</span>;
                    <span style="color:#57A64A;">// notify the EditContext whick will precipitate a Validation Message general update</span>
                    EditContext.NotifyValidationStateChanged();
                }
            }
            <span style="color:#57A64A;">// Clear the Tab notification flag</span>
            _setValueByTab = <span style="color:#569CD6;">false</span>;
        }
    }

    <span style="color:#57A64A;">// Keep _typedText up to date with typed entry</span>
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> UpdateEnteredText(ChangeEventArgs e)
        =&gt; _typedText = e.Value.ToString();

    <span style="color:#57A64A;">// Detector for Tabbing away from the input</span>
    <span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> OnKeyDown(KeyboardEventArgs e)
    {
        <span style="color:#57A64A;">// Check if we have a Tab with some text already typed and are in RestrictToList Mode</span>
        _setValueByTab = RestrictToList &amp;&amp; (!<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(e.Key)) &amp;&amp; e.Key.Equals(<span style="color:#D69D85;">&quot;Tab&quot;</span>) &amp;&amp; !<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(<span style="color:#569CD6;">this</span>._typedText);
    }

    <span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">override</span> <span style="color:#569CD6;">bool</span> TryParseValueFromString(<span style="color:#569CD6;">string</span> value, [MaybeNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span> result, [NotNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span> validationErrorMessage)
        =&gt; <span style="color:#569CD6;">throw</span> <span style="color:#569CD6;">new</span> NotSupportedException($<span style="color:#D69D85;">&quot;This component does not parse string inputs. Bind to the &#39;{nameof(CurrentValue)}&#39; property, not &#39;{nameof(CurrentValueAsString)}&#39;.&quot;</span>);
}
</pre></div>
<p>And the Razor:</p>
<ol>
<li>Input uses the CSS generated by the control.</li>
<li>Binds to <code>CurrentValue</code>.</li>
<li>Adds the additional Attributes, including the <code>Aria</code> generated by the control.</li>
<li>Binds <code>list</code> to the <code>datalist</code>.</li>
<li>Hooks up event handlers to <code>oninput</code> and <code>onkeydown</code>.</li>
<li>Builds the <code>datalist</code> from the control <code>DataList</code> property.</li>
</ol>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@namespace MyNameSpace.Components
@inherits InputBase<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">string</span><span style="color:#569CD6;">&gt;</span>

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">input</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@CssClass&quot;</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;text&quot; @bind-value=&quot;this.CurrentStringValue&quot; @attributes=&quot;this.AdditionalAttributes&quot;</span> <span style="color:#FF0000;">list</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@dataListId&quot; @oninput=&quot;UpdateEnteredText&quot; @onkeydown=&quot;OnKeyDown&quot;</span> <span style="color:#569CD6;">/&gt;</span>

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">datalist</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@dataListId&quot;</span><span style="color:#569CD6;">&gt;</span>
    @foreach (var option in this.DataList)
    {
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">option</span> <span style="color:#FF0000;">value</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@option&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    }
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">datalist</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>Test the control in the test page.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span> <span style="color:#FF0000;">for</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;txtcountry&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country (Any Value)
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
        &lt;InputDataList @bind-Value=&quot;model.Value&quot; DataList=&quot;Countries.CountryArray&quot; class=&quot;form-control&quot; placeholder=&quot;Select a country&quot;&gt;<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">InputDataList</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span> <span style="color:#FF0000;">for</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;txtcountry&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country (Strict)
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
        &lt;InputDataList @bind-Value=&quot;model.StrictValue&quot; DataList=&quot;Countries.CountryArray&quot; RestrictToList=&quot;true&quot; class=&quot;form-control&quot; placeholder=&quot;Select a country&quot;&gt;<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">InputDataList</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">ValidationMessage</span> <span style="color:#FF0000;">For</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;(() =&gt; model.StrictValue)&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">ValidationMessage</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country Value
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-control&quot;</span><span style="color:#569CD6;">&gt;</span>
        @this.model.Value
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country Strict Value
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-control&quot;</span><span style="color:#569CD6;">&gt;</span>
        @this.model.StrictValue
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
class Model
{
    public string Value { get; set; } = string.Empty;
    public string StrictValue { get; set; } = string.Empty;
    public int Index { get; set; } = 0;
    public int TIndex { get; set; } = 0;
    public int Opinion { get; set; } = 0;
}
</pre></div>
<p>The control doesn't use <code>CurrentValueAsString</code> and <code>TryParseValueFromString</code>.  Instead We build a parallel <code>CurrentStringValue</code>,containing all the logic in both <code>CurrentValueAsString</code> and <code>TryParseValueFromString</code>, and wire the html input to it.  We don't use <code>TryParseValueFromString</code>, but as it's abstract we need to implement a blind version of it.</p>
<h2 id="input-search-select-control">Input Search Select Control</h2>
<p>The Select replacement version of the control builds on <code>InputDataList</code>.  We:</p>
<ol>
<li>Convert over to a key/value pair list with a generic key.</li>
<li>Add the extra logic for convertion from TValue to string and back in the Html <em>input</em>.</li>
<li>Add the generics handling within the class.</li>
</ol>
<p>Copy <code>InputDataList</code> and rename it to <code>InputDataListSelect</code>.</p>
<p>Add the generic declaration.  The control will work with most obvious types as the Key - e.g. int, long, string.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">public</span> <span style="color:#569CD6;">partial</span> <span style="color:#569CD6;">class</span> InputDataListSelect&lt;TValue&gt; : InputBase&lt;TValue&gt;
</pre></div>
<p>Change DataList to a <code>SortedDictionary</code>.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
[Parameter] <span style="color:#569CD6;">public</span> SortedDictionary&lt;TValue, <span style="color:#569CD6;">string</span>&gt; DataList { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; }
</pre></div>
<p>The extra private properties are as follows.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#57A64A;">// the EditContext ValidationMessageStore</span>
<span style="color:#569CD6;">private</span> ValidationMessageStore? _parsingValidationMessages;
<span style="color:#57A64A;">// field to manage parsing failure</span>
<span style="color:#569CD6;">private</span> <span style="color:#569CD6;">bool</span> _previousParsingAttemptFailed = <span style="color:#569CD6;">false</span>;

</pre></div>
<p><code>CurrentValue</code> has changed a little to handle K/V pairs and do K/V pair lookups.  Again the inline comments provide detail.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">string</span> CurrentStringValue
{
    <span style="color:#569CD6;">get</span>
    {
        <span style="color:#57A64A;">// check if we have a match to the datalist and get the value from the K/V pair</span>
        <span style="color:#569CD6;">if</span> (DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Any(item =&gt; item.Key.Equals(<span style="color:#569CD6;">this</span>.Value)))
            <span style="color:#569CD6;">return</span> DataList.First(item =&gt; item.Key.Equals(<span style="color:#569CD6;">this</span>.Value)).Value;
        <span style="color:#57A64A;">// if not return an empty string</span>
        <span style="color:#569CD6;">return</span> <span style="color:#569CD6;">string</span>.Empty;
    }
    <span style="color:#569CD6;">set</span>
    {
        <span style="color:#57A64A;">// Check if we have a ValidationMessageStore</span>
        <span style="color:#57A64A;">// Either get one or clear the existing one</span>
        <span style="color:#569CD6;">if</span> (_parsingValidationMessages == <span style="color:#569CD6;">null</span>)
            _parsingValidationMessages = <span style="color:#569CD6;">new</span> ValidationMessageStore(EditContext);
        <span style="color:#569CD6;">else</span>
            _parsingValidationMessages?.Clear(FieldIdentifier);

        <span style="color:#57A64A;">// Set defaults</span>
        TValue val = <span style="color:#569CD6;">default</span>;
        <span style="color:#569CD6;">var</span> _havevalue = <span style="color:#569CD6;">false</span>;
        <span style="color:#57A64A;">// check if we have a previous valid value - we&#39;ll stick with this is the current attempt to set the value is invalid</span>
        <span style="color:#569CD6;">var</span> _havepreviousvalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.ContainsKey(<span style="color:#569CD6;">this</span>.Value);

        <span style="color:#57A64A;">// Set the value by tabbing.  We need to select the first entry in the DataList</span>
        <span style="color:#569CD6;">if</span> (_setValueByTab)
        {
            <span style="color:#569CD6;">if</span> (!<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(<span style="color:#569CD6;">this</span>._typedText))
            {
                <span style="color:#57A64A;">// Check if we have at least one K/V match in the filtered list</span>
                _havevalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.Any(item =&gt; item.Value.Contains(_typedText, StringComparison.CurrentCultureIgnoreCase));
                <span style="color:#569CD6;">if</span> (_havevalue)
                {
                    <span style="color:#57A64A;">// the the first K/V pair</span>
                    <span style="color:#569CD6;">var</span> filteredList = DataList.Where(item =&gt; item.Value.Contains(_typedText, StringComparison.CurrentCultureIgnoreCase)).ToList();
                    val = filteredList[<span style="color:#B5CEA8;">0</span>].Key;
                }
            }
        }
        <span style="color:#57A64A;">// Normal set</span>
        <span style="color:#569CD6;">else</span>
        {
            <span style="color:#57A64A;">// Check if we have a match and set it if we do</span>
            _havevalue = DataList != <span style="color:#569CD6;">null</span> &amp;&amp; DataList.ContainsValue(value);
            <span style="color:#569CD6;">if</span> (_havevalue)
                val = DataList.First(item =&gt; item.Value.Equals(value)).Key;
        }

        <span style="color:#57A64A;">// check if we have a valid value</span>
        <span style="color:#569CD6;">if</span> (_havevalue)
        {
            <span style="color:#57A64A;">// assign it to current value - this will kick off a ValueChanged notification on the EditContext</span>
            <span style="color:#569CD6;">this</span>.CurrentValue = val;
            <span style="color:#57A64A;">// Check if the last entry failed validation.  If so notify the EditContext that validation has changed i.e. it&#39;s now clear</span>
            <span style="color:#569CD6;">if</span> (_previousParsingAttemptFailed)
            {
                EditContext.NotifyValidationStateChanged();
                _previousParsingAttemptFailed = <span style="color:#569CD6;">false</span>;
            }
        }
        <span style="color:#57A64A;">// We don&#39;t have a valid value</span>
        <span style="color:#569CD6;">else</span>
        {
            <span style="color:#57A64A;">// check if we&#39;re reverting to the last entry.  If we don&#39;t have one the generate error message</span>
            <span style="color:#569CD6;">if</span> (!_havepreviousvalue)
            {
                <span style="color:#57A64A;">// No K/V match so add a message to the message store</span>
                _parsingValidationMessages?.Add(FieldIdentifier, <span style="color:#D69D85;">&quot;You must choose a valid selection&quot;</span>);
                <span style="color:#57A64A;">// keep track of validation state for the next iteration</span>
                _previousParsingAttemptFailed = <span style="color:#569CD6;">true</span>;
                <span style="color:#57A64A;">// notify the EditContext whick will precipitate a Validation Message general update</span>
                EditContext.NotifyValidationStateChanged();
            }
        }
        <span style="color:#57A64A;">// Clear the Tab notification flag</span>
        _setValueByTab = <span style="color:#569CD6;">false</span>;
    }
}
</pre></div>
<p><code>OnKeyDown</code> sets the <code>_setValueByTab</code> flag.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> UpdateEnteredText(ChangeEventArgs e)
    =&gt; _typedText = e.Value?.ToString();

<span style="color:#569CD6;">private</span> <span style="color:#569CD6;">void</span> OnKeyDown(KeyboardEventArgs e)
{
    <span style="color:#57A64A;">// Check if we have a Tab with some text already typed</span>
    _setValueByTab = ((!<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(e.Key)) &amp;&amp; e.Key.Equals(<span style="color:#D69D85;">&quot;Tab&quot;</span>) &amp;&amp; !<span style="color:#569CD6;">string</span>.IsNullOrWhiteSpace(<span style="color:#569CD6;">this</span>._typedText));
}

<span style="color:#57A64A;">// set as blind</span>
<span style="color:#569CD6;">protected</span> <span style="color:#569CD6;">override</span> <span style="color:#569CD6;">bool</span> TryParseValueFromString(<span style="color:#569CD6;">string</span>? value, [MaybeNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> TValue result, [NotNullWhen(<span style="color:#569CD6;">false</span>)] <span style="color:#569CD6;">out</span> <span style="color:#569CD6;">string</span> validationErrorMessage)
    =&gt; <span style="color:#569CD6;">throw</span> <span style="color:#569CD6;">new</span> NotSupportedException($<span style="color:#D69D85;">&quot;This component does not parse normal string inputs. Bind to the &#39;{nameof(CurrentValue)}&#39; property, not &#39;{nameof(CurrentValueAsString)}&#39;.&quot;</span>);
</pre></div>
<p>The Razor is almost the same:</p>
<ol>
<li><code>datalist</code> changes to accommodate a K/V pair list.</li>
<li>Add the <code>@typeparam</code>.</li>
</ol>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
@namespace Blazor.Database.Components
@inherits InputBase<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">TValue</span><span style="color:#569CD6;">&gt;</span>
@typeparam TValue

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">input</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@CssClass&quot;</span> <span style="color:#FF0000;">type</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;text&quot; @bind-value=&quot;this.CurrentStringValue&quot; @attributes=&quot;this.AdditionalAttributes&quot;</span> <span style="color:#FF0000;">list</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@dataListId&quot; @oninput=&quot;UpdateEnteredText&quot; @onkeydown=&quot;OnKeyDown&quot;</span> <span style="color:#569CD6;">/&gt;</span>

<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">datalist</span> <span style="color:#FF0000;">id</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@dataListId&quot;</span><span style="color:#569CD6;">&gt;</span>
    @foreach (var kv in this.DataList)
    {
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">option</span> <span style="color:#FF0000;">value</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;@kv.Value&quot;</span> <span style="color:#569CD6;">/&gt;</span>
    }
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">datalist</span><span style="color:#569CD6;">&gt;</span>
</pre></div>
<p>Test it by adding a row to the edit table in the test page.  Try entering an invalid string - something like &quot;xxxx&quot;.</p>
<div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span> <span style="color:#FF0000;">for</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;txtcountry&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country T Index
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">InputDataListSelect</span> <span style="color:#FF0000;">TValue</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;int&quot; @bind-Value=&quot;model.TIndex&quot;</span> <span style="color:#FF0000;">DataList</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Countries.CountryDictionary&quot;</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;form-control&quot;</span> <span style="color:#FF0000;">placeholder</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;Select a country&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">InputDataListSelect</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4&quot;</span><span style="color:#569CD6;">&gt;</span>
        <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">ValidationMessage</span> <span style="color:#FF0000;">For</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;(() =&gt; model.TIndex)&quot;</span><span style="color:#569CD6;">&gt;</span><span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">ValidationMessage</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;row mb-2&quot;</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-label&quot;</span><span style="color:#569CD6;">&gt;</span>
        Country T Index
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
    <span style="color:#569CD6;">&lt;</span><span style="color:#A31515;">div</span> <span style="color:#FF0000;">class</span><span style="color:#569CD6;">=</span><span style="color:#569CD6;">&quot;col-4 form-control&quot;</span><span style="color:#569CD6;">&gt;</span>
        @this.model.TIndex
    <span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
<span style="color:#569CD6;">&lt;/</span><span style="color:#A31515;">div</span><span style="color:#569CD6;">&gt;</span>
</pre></div><div style="color:#DADADA;background-color:#1E1E1E;"><pre>
<span style="color:#569CD6;">class</span> Model
{
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">string</span> Value { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#569CD6;">string</span>.Empty;
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">string</span> StrictValue { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#569CD6;">string</span>.Empty;
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">int</span> Index { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#B5CEA8;">0</span>;
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">int</span> TIndex { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#B5CEA8;">0</span>;
    <span style="color:#569CD6;">public</span> <span style="color:#569CD6;">int</span> Opinion { <span style="color:#569CD6;">get</span>; <span style="color:#569CD6;">set</span>; } = <span style="color:#B5CEA8;">0</span>;
}
</pre></div><h2 id="wrap-up">Wrap Up</h2>
<p>Building edit components is not trivial, but also should not be feared.</p>
<p>The examples I've built are based on <code>InputBase</code>.  If you start building your own controls, I thoroughly recommend taking a little time and getting familiar with <code>InputBase</code> and it's siblings.  The code is <a href="https://github.com/dotnet/aspnetcore/blob/main/src/Components/Web/src/Forms/InputBase.cs">here</a>.</p>
</div></div></div></body></html>





